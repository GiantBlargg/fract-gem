!function(t){function a(n){if(r[n])return r[n].exports;var e=r[n]={i:n,l:!1,exports:{}};return t[n].call(e.exports,e,e.exports,a),e.l=!0,e.exports}var r={};a.m=t,a.c=r,a.d=function(t,r,n){a.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:n})},a.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(r,"a",r),r},a.o=function(t,a){return Object.prototype.hasOwnProperty.call(t,a)},a.p="",a(a.s=8)}([function(t,a){var r={};r.EPSILON=1e-6,r.ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,r.RANDOM=Math.random,r.ENABLE_SIMD=!1,r.SIMD_AVAILABLE=r.ARRAY_TYPE===Float32Array&&"SIMD"in this,r.USE_SIMD=r.ENABLE_SIMD&&r.SIMD_AVAILABLE,r.setMatrixArrayType=function(t){r.ARRAY_TYPE=t};var n=Math.PI/180;r.toRadian=function(t){return t*n},r.equals=function(t,a){return Math.abs(t-a)<=r.EPSILON*Math.max(1,Math.abs(t),Math.abs(a))},t.exports=r},function(t,a,r){"use strict";let n={gem:{vertecies:[1,0,0,1,1,1,0,1,0,1,1,1,0,0,1,1,1,1,0,1,0,-1,1,1,-1,0,0,-1,1,1,0,0,1,-1,1,1,-1,0,0,-1,-1,1,0,-1,0,-1,-1,1,0,0,1,-1,-1,1,0,-1,0,1,-1,1,1,0,0,1,-1,1,0,0,1,1,-1,1,0,1,0,1,1,-1,1,0,0,1,1,-1,0,0,-1,1,1,-1,-1,0,0,-1,1,-1,0,1,0,-1,1,-1,0,0,-1,-1,1,-1,0,-1,0,-1,-1,-1,-1,0,0,-1,-1,-1,0,0,-1,-1,-1,-1,1,0,0,1,-1,-1,0,-1,0,1,-1,-1,0,0,-1,1,-1,-1],speed:500,specStrength:.5,colour:[.2,0,.7,.9]},transform:{view:{eye:[0,-2,1],centre:[0,0,0],up:[0,0,1]},proj:{width:2.1,height:1.9,depth:10}},light:{colour:[1,1,.5],dir:[1,1,-1],ambientStrength:.1},bg:{baseColour:[.1,.1,.1],vinRadi:2,ripple:{colour:[.9,.9,.9],chance:.1,strength:{min:1e3,max:5e3},size:.75}},fb:{size:{width:64,height:64},squaresSpeed:500,spiralSpeed:1e3}};a.a=n},function(t,a,r){a.glMatrix=r(0),a.mat2=r(10),a.mat2d=r(11),a.mat3=r(4),a.mat4=r(12),a.quat=r(13),a.vec2=r(14),a.vec3=r(5),a.vec4=r(6)},function(t,a,r){"use strict";function n(t,a){let n;if(a.match(/.vsh$/))n=t.VERTEX_SHADER;else{if(!a.match(/.fsh$/))throw"Could not determine shader type.";n=t.FRAGMENT_SHADER}let e=r(15)("./"+a+".glsl"),o=t.createShader(n);if(t.shaderSource(o,e),t.compileShader(o),!t.getShaderParameter(o,t.COMPILE_STATUS)){let r=t.getShaderInfoLog(o);throw t.deleteShader(o),'An error occurred compiling the shader "'+a+'": '+r}return o}class e{constructor(t,...a){this.gl=t,this.ID=t.createProgram();let r=new Array(a.length);for(let e=0;e<a.length;e++)r[e]=n(this.gl,a[e]),t.attachShader(this.ID,r[e]);t.linkProgram(this.ID);for(let a=0;a<r.length;a++)t.detachShader(this.ID,r[a]),t.deleteShader(r[a]);if(!t.getProgramParameter(this.ID,t.LINK_STATUS))throw'An error occoured linking the shaders "'+a.join('", "')+": "+t.getProgramInfoLog(this.ID)}use(){this.gl.useProgram(this.ID)}get(t){return this.gl.getUniformLocation(this.ID,t)}uniform(t,a,r,...n){let e=this.get(a);switch("number"==typeof r&&(r=[r],n&&(r=r.concat(n))),r instanceof Array&&(r=new Float32Array(r)),t){case 1:this.gl.uniform1fv(e,r);break;case 2:this.gl.uniform2fv(e,r);break;case 3:this.gl.uniform3fv(e,r);break;case 4:this.gl.uniform4fv(e,r)}}uniformi(t,a,r,...n){let e=this.get(a);switch("number"==typeof r&&(r=[r],n&&(r=r.concat(n))),r instanceof Array&&(r=new Int32Array(r)),t){case 1:this.gl.uniform1iv(e,r);break;case 2:this.gl.uniform2iv(e,r);break;case 3:this.gl.uniform3iv(e,r);break;case 4:this.gl.uniform4iv(e,r)}}uniformMatrix(t,a){let r=this.get(t);switch(a instanceof Array&&(a=new Float32Array(a)),a.length){case 4:this.gl.uniformMatrix2fv(r,!1,a);break;case 8:this.gl.uniformMatrix3fv(r,!1,a);break;case 16:this.gl.uniformMatrix4fv(r,!1,a);break;default:throw"Could not determine matrix size"}}}a.a=e},function(t,a,r){var n=r(0),e={};e.create=function(){var t=new n.ARRAY_TYPE(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},e.fromMat4=function(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[4],t[4]=a[5],t[5]=a[6],t[6]=a[8],t[7]=a[9],t[8]=a[10],t},e.clone=function(t){var a=new n.ARRAY_TYPE(9);return a[0]=t[0],a[1]=t[1],a[2]=t[2],a[3]=t[3],a[4]=t[4],a[5]=t[5],a[6]=t[6],a[7]=t[7],a[8]=t[8],a},e.copy=function(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[4]=a[4],t[5]=a[5],t[6]=a[6],t[7]=a[7],t[8]=a[8],t},e.fromValues=function(t,a,r,e,o,i,l,s,u){var h=new n.ARRAY_TYPE(9);return h[0]=t,h[1]=a,h[2]=r,h[3]=e,h[4]=o,h[5]=i,h[6]=l,h[7]=s,h[8]=u,h},e.set=function(t,a,r,n,e,o,i,l,s,u){return t[0]=a,t[1]=r,t[2]=n,t[3]=e,t[4]=o,t[5]=i,t[6]=l,t[7]=s,t[8]=u,t},e.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},e.transpose=function(t,a){if(t===a){var r=a[1],n=a[2],e=a[5];t[1]=a[3],t[2]=a[6],t[3]=r,t[5]=a[7],t[6]=n,t[7]=e}else t[0]=a[0],t[1]=a[3],t[2]=a[6],t[3]=a[1],t[4]=a[4],t[5]=a[7],t[6]=a[2],t[7]=a[5],t[8]=a[8];return t},e.invert=function(t,a){var r=a[0],n=a[1],e=a[2],o=a[3],i=a[4],l=a[5],s=a[6],u=a[7],h=a[8],c=h*i-l*u,M=-h*o+l*s,f=u*o-i*s,m=r*c+n*M+e*f;return m?(m=1/m,t[0]=c*m,t[1]=(-h*n+e*u)*m,t[2]=(l*n-e*i)*m,t[3]=M*m,t[4]=(h*r-e*s)*m,t[5]=(-l*r+e*o)*m,t[6]=f*m,t[7]=(-u*r+n*s)*m,t[8]=(i*r-n*o)*m,t):null},e.adjoint=function(t,a){var r=a[0],n=a[1],e=a[2],o=a[3],i=a[4],l=a[5],s=a[6],u=a[7],h=a[8];return t[0]=i*h-l*u,t[1]=e*u-n*h,t[2]=n*l-e*i,t[3]=l*s-o*h,t[4]=r*h-e*s,t[5]=e*o-r*l,t[6]=o*u-i*s,t[7]=n*s-r*u,t[8]=r*i-n*o,t},e.determinant=function(t){var a=t[0],r=t[1],n=t[2],e=t[3],o=t[4],i=t[5],l=t[6],s=t[7],u=t[8];return a*(u*o-i*s)+r*(-u*e+i*l)+n*(s*e-o*l)},e.multiply=function(t,a,r){var n=a[0],e=a[1],o=a[2],i=a[3],l=a[4],s=a[5],u=a[6],h=a[7],c=a[8],M=r[0],f=r[1],m=r[2],x=r[3],d=r[4],S=r[5],I=r[6],D=r[7],F=r[8];return t[0]=M*n+f*i+m*u,t[1]=M*e+f*l+m*h,t[2]=M*o+f*s+m*c,t[3]=x*n+d*i+S*u,t[4]=x*e+d*l+S*h,t[5]=x*o+d*s+S*c,t[6]=I*n+D*i+F*u,t[7]=I*e+D*l+F*h,t[8]=I*o+D*s+F*c,t},e.mul=e.multiply,e.translate=function(t,a,r){var n=a[0],e=a[1],o=a[2],i=a[3],l=a[4],s=a[5],u=a[6],h=a[7],c=a[8],M=r[0],f=r[1];return t[0]=n,t[1]=e,t[2]=o,t[3]=i,t[4]=l,t[5]=s,t[6]=M*n+f*i+u,t[7]=M*e+f*l+h,t[8]=M*o+f*s+c,t},e.rotate=function(t,a,r){var n=a[0],e=a[1],o=a[2],i=a[3],l=a[4],s=a[5],u=a[6],h=a[7],c=a[8],M=Math.sin(r),f=Math.cos(r);return t[0]=f*n+M*i,t[1]=f*e+M*l,t[2]=f*o+M*s,t[3]=f*i-M*n,t[4]=f*l-M*e,t[5]=f*s-M*o,t[6]=u,t[7]=h,t[8]=c,t},e.scale=function(t,a,r){var n=r[0],e=r[1];return t[0]=n*a[0],t[1]=n*a[1],t[2]=n*a[2],t[3]=e*a[3],t[4]=e*a[4],t[5]=e*a[5],t[6]=a[6],t[7]=a[7],t[8]=a[8],t},e.fromTranslation=function(t,a){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=a[0],t[7]=a[1],t[8]=1,t},e.fromRotation=function(t,a){var r=Math.sin(a),n=Math.cos(a);return t[0]=n,t[1]=r,t[2]=0,t[3]=-r,t[4]=n,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},e.fromScaling=function(t,a){return t[0]=a[0],t[1]=0,t[2]=0,t[3]=0,t[4]=a[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},e.fromMat2d=function(t,a){return t[0]=a[0],t[1]=a[1],t[2]=0,t[3]=a[2],t[4]=a[3],t[5]=0,t[6]=a[4],t[7]=a[5],t[8]=1,t},e.fromQuat=function(t,a){var r=a[0],n=a[1],e=a[2],o=a[3],i=r+r,l=n+n,s=e+e,u=r*i,h=n*i,c=n*l,M=e*i,f=e*l,m=e*s,x=o*i,d=o*l,S=o*s;return t[0]=1-c-m,t[3]=h-S,t[6]=M+d,t[1]=h+S,t[4]=1-u-m,t[7]=f-x,t[2]=M-d,t[5]=f+x,t[8]=1-u-c,t},e.normalFromMat4=function(t,a){var r=a[0],n=a[1],e=a[2],o=a[3],i=a[4],l=a[5],s=a[6],u=a[7],h=a[8],c=a[9],M=a[10],f=a[11],m=a[12],x=a[13],d=a[14],S=a[15],I=r*l-n*i,D=r*s-e*i,F=r*u-o*i,p=n*s-e*l,v=n*u-o*l,b=e*u-o*s,g=h*x-c*m,A=h*d-M*m,E=h*S-f*m,w=c*d-M*x,z=c*S-f*x,R=M*S-f*d,P=I*R-D*z+F*w+p*E-v*A+b*g;return P?(P=1/P,t[0]=(l*R-s*z+u*w)*P,t[1]=(s*E-i*R-u*A)*P,t[2]=(i*z-l*E+u*g)*P,t[3]=(e*z-n*R-o*w)*P,t[4]=(r*R-e*E+o*A)*P,t[5]=(n*E-r*z-o*g)*P,t[6]=(x*b-d*v+S*p)*P,t[7]=(d*F-m*b-S*D)*P,t[8]=(m*v-x*F+S*I)*P,t):null},e.str=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},e.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))},e.add=function(t,a,r){return t[0]=a[0]+r[0],t[1]=a[1]+r[1],t[2]=a[2]+r[2],t[3]=a[3]+r[3],t[4]=a[4]+r[4],t[5]=a[5]+r[5],t[6]=a[6]+r[6],t[7]=a[7]+r[7],t[8]=a[8]+r[8],t},e.subtract=function(t,a,r){return t[0]=a[0]-r[0],t[1]=a[1]-r[1],t[2]=a[2]-r[2],t[3]=a[3]-r[3],t[4]=a[4]-r[4],t[5]=a[5]-r[5],t[6]=a[6]-r[6],t[7]=a[7]-r[7],t[8]=a[8]-r[8],t},e.sub=e.subtract,e.multiplyScalar=function(t,a,r){return t[0]=a[0]*r,t[1]=a[1]*r,t[2]=a[2]*r,t[3]=a[3]*r,t[4]=a[4]*r,t[5]=a[5]*r,t[6]=a[6]*r,t[7]=a[7]*r,t[8]=a[8]*r,t},e.multiplyScalarAndAdd=function(t,a,r,n){return t[0]=a[0]+r[0]*n,t[1]=a[1]+r[1]*n,t[2]=a[2]+r[2]*n,t[3]=a[3]+r[3]*n,t[4]=a[4]+r[4]*n,t[5]=a[5]+r[5]*n,t[6]=a[6]+r[6]*n,t[7]=a[7]+r[7]*n,t[8]=a[8]+r[8]*n,t},e.exactEquals=function(t,a){return t[0]===a[0]&&t[1]===a[1]&&t[2]===a[2]&&t[3]===a[3]&&t[4]===a[4]&&t[5]===a[5]&&t[6]===a[6]&&t[7]===a[7]&&t[8]===a[8]},e.equals=function(t,a){var r=t[0],e=t[1],o=t[2],i=t[3],l=t[4],s=t[5],u=t[6],h=t[7],c=t[8],M=a[0],f=a[1],m=a[2],x=a[3],d=a[4],S=a[5],I=t[6],D=a[7],F=a[8];return Math.abs(r-M)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(M))&&Math.abs(e-f)<=n.EPSILON*Math.max(1,Math.abs(e),Math.abs(f))&&Math.abs(o-m)<=n.EPSILON*Math.max(1,Math.abs(o),Math.abs(m))&&Math.abs(i-x)<=n.EPSILON*Math.max(1,Math.abs(i),Math.abs(x))&&Math.abs(l-d)<=n.EPSILON*Math.max(1,Math.abs(l),Math.abs(d))&&Math.abs(s-S)<=n.EPSILON*Math.max(1,Math.abs(s),Math.abs(S))&&Math.abs(u-I)<=n.EPSILON*Math.max(1,Math.abs(u),Math.abs(I))&&Math.abs(h-D)<=n.EPSILON*Math.max(1,Math.abs(h),Math.abs(D))&&Math.abs(c-F)<=n.EPSILON*Math.max(1,Math.abs(c),Math.abs(F))},t.exports=e},function(t,a,r){var n=r(0),e={};e.create=function(){var t=new n.ARRAY_TYPE(3);return t[0]=0,t[1]=0,t[2]=0,t},e.clone=function(t){var a=new n.ARRAY_TYPE(3);return a[0]=t[0],a[1]=t[1],a[2]=t[2],a},e.fromValues=function(t,a,r){var e=new n.ARRAY_TYPE(3);return e[0]=t,e[1]=a,e[2]=r,e},e.copy=function(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t},e.set=function(t,a,r,n){return t[0]=a,t[1]=r,t[2]=n,t},e.add=function(t,a,r){return t[0]=a[0]+r[0],t[1]=a[1]+r[1],t[2]=a[2]+r[2],t},e.subtract=function(t,a,r){return t[0]=a[0]-r[0],t[1]=a[1]-r[1],t[2]=a[2]-r[2],t},e.sub=e.subtract,e.multiply=function(t,a,r){return t[0]=a[0]*r[0],t[1]=a[1]*r[1],t[2]=a[2]*r[2],t},e.mul=e.multiply,e.divide=function(t,a,r){return t[0]=a[0]/r[0],t[1]=a[1]/r[1],t[2]=a[2]/r[2],t},e.div=e.divide,e.ceil=function(t,a){return t[0]=Math.ceil(a[0]),t[1]=Math.ceil(a[1]),t[2]=Math.ceil(a[2]),t},e.floor=function(t,a){return t[0]=Math.floor(a[0]),t[1]=Math.floor(a[1]),t[2]=Math.floor(a[2]),t},e.min=function(t,a,r){return t[0]=Math.min(a[0],r[0]),t[1]=Math.min(a[1],r[1]),t[2]=Math.min(a[2],r[2]),t},e.max=function(t,a,r){return t[0]=Math.max(a[0],r[0]),t[1]=Math.max(a[1],r[1]),t[2]=Math.max(a[2],r[2]),t},e.round=function(t,a){return t[0]=Math.round(a[0]),t[1]=Math.round(a[1]),t[2]=Math.round(a[2]),t},e.scale=function(t,a,r){return t[0]=a[0]*r,t[1]=a[1]*r,t[2]=a[2]*r,t},e.scaleAndAdd=function(t,a,r,n){return t[0]=a[0]+r[0]*n,t[1]=a[1]+r[1]*n,t[2]=a[2]+r[2]*n,t},e.distance=function(t,a){var r=a[0]-t[0],n=a[1]-t[1],e=a[2]-t[2];return Math.sqrt(r*r+n*n+e*e)},e.dist=e.distance,e.squaredDistance=function(t,a){var r=a[0]-t[0],n=a[1]-t[1],e=a[2]-t[2];return r*r+n*n+e*e},e.sqrDist=e.squaredDistance,e.length=function(t){var a=t[0],r=t[1],n=t[2];return Math.sqrt(a*a+r*r+n*n)},e.len=e.length,e.squaredLength=function(t){var a=t[0],r=t[1],n=t[2];return a*a+r*r+n*n},e.sqrLen=e.squaredLength,e.negate=function(t,a){return t[0]=-a[0],t[1]=-a[1],t[2]=-a[2],t},e.inverse=function(t,a){return t[0]=1/a[0],t[1]=1/a[1],t[2]=1/a[2],t},e.normalize=function(t,a){var r=a[0],n=a[1],e=a[2],o=r*r+n*n+e*e;return o>0&&(o=1/Math.sqrt(o),t[0]=a[0]*o,t[1]=a[1]*o,t[2]=a[2]*o),t},e.dot=function(t,a){return t[0]*a[0]+t[1]*a[1]+t[2]*a[2]},e.cross=function(t,a,r){var n=a[0],e=a[1],o=a[2],i=r[0],l=r[1],s=r[2];return t[0]=e*s-o*l,t[1]=o*i-n*s,t[2]=n*l-e*i,t},e.lerp=function(t,a,r,n){var e=a[0],o=a[1],i=a[2];return t[0]=e+n*(r[0]-e),t[1]=o+n*(r[1]-o),t[2]=i+n*(r[2]-i),t},e.hermite=function(t,a,r,n,e,o){var i=o*o,l=i*(2*o-3)+1,s=i*(o-2)+o,u=i*(o-1),h=i*(3-2*o);return t[0]=a[0]*l+r[0]*s+n[0]*u+e[0]*h,t[1]=a[1]*l+r[1]*s+n[1]*u+e[1]*h,t[2]=a[2]*l+r[2]*s+n[2]*u+e[2]*h,t},e.bezier=function(t,a,r,n,e,o){var i=1-o,l=i*i,s=o*o,u=l*i,h=3*o*l,c=3*s*i,M=s*o;return t[0]=a[0]*u+r[0]*h+n[0]*c+e[0]*M,t[1]=a[1]*u+r[1]*h+n[1]*c+e[1]*M,t[2]=a[2]*u+r[2]*h+n[2]*c+e[2]*M,t},e.random=function(t,a){a=a||1;var r=2*n.RANDOM()*Math.PI,e=2*n.RANDOM()-1,o=Math.sqrt(1-e*e)*a;return t[0]=Math.cos(r)*o,t[1]=Math.sin(r)*o,t[2]=e*a,t},e.transformMat4=function(t,a,r){var n=a[0],e=a[1],o=a[2],i=r[3]*n+r[7]*e+r[11]*o+r[15];return i=i||1,t[0]=(r[0]*n+r[4]*e+r[8]*o+r[12])/i,t[1]=(r[1]*n+r[5]*e+r[9]*o+r[13])/i,t[2]=(r[2]*n+r[6]*e+r[10]*o+r[14])/i,t},e.transformMat3=function(t,a,r){var n=a[0],e=a[1],o=a[2];return t[0]=n*r[0]+e*r[3]+o*r[6],t[1]=n*r[1]+e*r[4]+o*r[7],t[2]=n*r[2]+e*r[5]+o*r[8],t},e.transformQuat=function(t,a,r){var n=a[0],e=a[1],o=a[2],i=r[0],l=r[1],s=r[2],u=r[3],h=u*n+l*o-s*e,c=u*e+s*n-i*o,M=u*o+i*e-l*n,f=-i*n-l*e-s*o;return t[0]=h*u+f*-i+c*-s-M*-l,t[1]=c*u+f*-l+M*-i-h*-s,t[2]=M*u+f*-s+h*-l-c*-i,t},e.rotateX=function(t,a,r,n){var e=[],o=[];return e[0]=a[0]-r[0],e[1]=a[1]-r[1],e[2]=a[2]-r[2],o[0]=e[0],o[1]=e[1]*Math.cos(n)-e[2]*Math.sin(n),o[2]=e[1]*Math.sin(n)+e[2]*Math.cos(n),t[0]=o[0]+r[0],t[1]=o[1]+r[1],t[2]=o[2]+r[2],t},e.rotateY=function(t,a,r,n){var e=[],o=[];return e[0]=a[0]-r[0],e[1]=a[1]-r[1],e[2]=a[2]-r[2],o[0]=e[2]*Math.sin(n)+e[0]*Math.cos(n),o[1]=e[1],o[2]=e[2]*Math.cos(n)-e[0]*Math.sin(n),t[0]=o[0]+r[0],t[1]=o[1]+r[1],t[2]=o[2]+r[2],t},e.rotateZ=function(t,a,r,n){var e=[],o=[];return e[0]=a[0]-r[0],e[1]=a[1]-r[1],e[2]=a[2]-r[2],o[0]=e[0]*Math.cos(n)-e[1]*Math.sin(n),o[1]=e[0]*Math.sin(n)+e[1]*Math.cos(n),o[2]=e[2],t[0]=o[0]+r[0],t[1]=o[1]+r[1],t[2]=o[2]+r[2],t},e.forEach=function(){var t=e.create();return function(a,r,n,e,o,i){var l,s;for(r||(r=3),n||(n=0),s=e?Math.min(e*r+n,a.length):a.length,l=n;l<s;l+=r)t[0]=a[l],t[1]=a[l+1],t[2]=a[l+2],o(t,t,i),a[l]=t[0],a[l+1]=t[1],a[l+2]=t[2];return a}}(),e.angle=function(t,a){var r=e.fromValues(t[0],t[1],t[2]),n=e.fromValues(a[0],a[1],a[2]);e.normalize(r,r),e.normalize(n,n);var o=e.dot(r,n);return o>1?0:Math.acos(o)},e.str=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},e.exactEquals=function(t,a){return t[0]===a[0]&&t[1]===a[1]&&t[2]===a[2]},e.equals=function(t,a){var r=t[0],e=t[1],o=t[2],i=a[0],l=a[1],s=a[2];return Math.abs(r-i)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(e-l)<=n.EPSILON*Math.max(1,Math.abs(e),Math.abs(l))&&Math.abs(o-s)<=n.EPSILON*Math.max(1,Math.abs(o),Math.abs(s))},t.exports=e},function(t,a,r){var n=r(0),e={};e.create=function(){var t=new n.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},e.clone=function(t){var a=new n.ARRAY_TYPE(4);return a[0]=t[0],a[1]=t[1],a[2]=t[2],a[3]=t[3],a},e.fromValues=function(t,a,r,e){var o=new n.ARRAY_TYPE(4);return o[0]=t,o[1]=a,o[2]=r,o[3]=e,o},e.copy=function(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t},e.set=function(t,a,r,n,e){return t[0]=a,t[1]=r,t[2]=n,t[3]=e,t},e.add=function(t,a,r){return t[0]=a[0]+r[0],t[1]=a[1]+r[1],t[2]=a[2]+r[2],t[3]=a[3]+r[3],t},e.subtract=function(t,a,r){return t[0]=a[0]-r[0],t[1]=a[1]-r[1],t[2]=a[2]-r[2],t[3]=a[3]-r[3],t},e.sub=e.subtract,e.multiply=function(t,a,r){return t[0]=a[0]*r[0],t[1]=a[1]*r[1],t[2]=a[2]*r[2],t[3]=a[3]*r[3],t},e.mul=e.multiply,e.divide=function(t,a,r){return t[0]=a[0]/r[0],t[1]=a[1]/r[1],t[2]=a[2]/r[2],t[3]=a[3]/r[3],t},e.div=e.divide,e.ceil=function(t,a){return t[0]=Math.ceil(a[0]),t[1]=Math.ceil(a[1]),t[2]=Math.ceil(a[2]),t[3]=Math.ceil(a[3]),t},e.floor=function(t,a){return t[0]=Math.floor(a[0]),t[1]=Math.floor(a[1]),t[2]=Math.floor(a[2]),t[3]=Math.floor(a[3]),t},e.min=function(t,a,r){return t[0]=Math.min(a[0],r[0]),t[1]=Math.min(a[1],r[1]),t[2]=Math.min(a[2],r[2]),t[3]=Math.min(a[3],r[3]),t},e.max=function(t,a,r){return t[0]=Math.max(a[0],r[0]),t[1]=Math.max(a[1],r[1]),t[2]=Math.max(a[2],r[2]),t[3]=Math.max(a[3],r[3]),t},e.round=function(t,a){return t[0]=Math.round(a[0]),t[1]=Math.round(a[1]),t[2]=Math.round(a[2]),t[3]=Math.round(a[3]),t},e.scale=function(t,a,r){return t[0]=a[0]*r,t[1]=a[1]*r,t[2]=a[2]*r,t[3]=a[3]*r,t},e.scaleAndAdd=function(t,a,r,n){return t[0]=a[0]+r[0]*n,t[1]=a[1]+r[1]*n,t[2]=a[2]+r[2]*n,t[3]=a[3]+r[3]*n,t},e.distance=function(t,a){var r=a[0]-t[0],n=a[1]-t[1],e=a[2]-t[2],o=a[3]-t[3];return Math.sqrt(r*r+n*n+e*e+o*o)},e.dist=e.distance,e.squaredDistance=function(t,a){var r=a[0]-t[0],n=a[1]-t[1],e=a[2]-t[2],o=a[3]-t[3];return r*r+n*n+e*e+o*o},e.sqrDist=e.squaredDistance,e.length=function(t){var a=t[0],r=t[1],n=t[2],e=t[3];return Math.sqrt(a*a+r*r+n*n+e*e)},e.len=e.length,e.squaredLength=function(t){var a=t[0],r=t[1],n=t[2],e=t[3];return a*a+r*r+n*n+e*e},e.sqrLen=e.squaredLength,e.negate=function(t,a){return t[0]=-a[0],t[1]=-a[1],t[2]=-a[2],t[3]=-a[3],t},e.inverse=function(t,a){return t[0]=1/a[0],t[1]=1/a[1],t[2]=1/a[2],t[3]=1/a[3],t},e.normalize=function(t,a){var r=a[0],n=a[1],e=a[2],o=a[3],i=r*r+n*n+e*e+o*o;return i>0&&(i=1/Math.sqrt(i),t[0]=r*i,t[1]=n*i,t[2]=e*i,t[3]=o*i),t},e.dot=function(t,a){return t[0]*a[0]+t[1]*a[1]+t[2]*a[2]+t[3]*a[3]},e.lerp=function(t,a,r,n){var e=a[0],o=a[1],i=a[2],l=a[3];return t[0]=e+n*(r[0]-e),t[1]=o+n*(r[1]-o),t[2]=i+n*(r[2]-i),t[3]=l+n*(r[3]-l),t},e.random=function(t,a){return a=a||1,t[0]=n.RANDOM(),t[1]=n.RANDOM(),t[2]=n.RANDOM(),t[3]=n.RANDOM(),e.normalize(t,t),e.scale(t,t,a),t},e.transformMat4=function(t,a,r){var n=a[0],e=a[1],o=a[2],i=a[3];return t[0]=r[0]*n+r[4]*e+r[8]*o+r[12]*i,t[1]=r[1]*n+r[5]*e+r[9]*o+r[13]*i,t[2]=r[2]*n+r[6]*e+r[10]*o+r[14]*i,t[3]=r[3]*n+r[7]*e+r[11]*o+r[15]*i,t},e.transformQuat=function(t,a,r){var n=a[0],e=a[1],o=a[2],i=r[0],l=r[1],s=r[2],u=r[3],h=u*n+l*o-s*e,c=u*e+s*n-i*o,M=u*o+i*e-l*n,f=-i*n-l*e-s*o;return t[0]=h*u+f*-i+c*-s-M*-l,t[1]=c*u+f*-l+M*-i-h*-s,t[2]=M*u+f*-s+h*-l-c*-i,t[3]=a[3],t},e.forEach=function(){var t=e.create();return function(a,r,n,e,o,i){var l,s;for(r||(r=4),n||(n=0),s=e?Math.min(e*r+n,a.length):a.length,l=n;l<s;l+=r)t[0]=a[l],t[1]=a[l+1],t[2]=a[l+2],t[3]=a[l+3],o(t,t,i),a[l]=t[0],a[l+1]=t[1],a[l+2]=t[2],a[l+3]=t[3];return a}}(),e.str=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},e.exactEquals=function(t,a){return t[0]===a[0]&&t[1]===a[1]&&t[2]===a[2]&&t[3]===a[3]},e.equals=function(t,a){var r=t[0],e=t[1],o=t[2],i=t[3],l=a[0],s=a[1],u=a[2],h=a[3];return Math.abs(r-l)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(e-s)<=n.EPSILON*Math.max(1,Math.abs(e),Math.abs(s))&&Math.abs(o-u)<=n.EPSILON*Math.max(1,Math.abs(o),Math.abs(u))&&Math.abs(i-h)<=n.EPSILON*Math.max(1,Math.abs(i),Math.abs(h))},t.exports=e},function(t,a,r){"use strict";function n(t,a,r,n){return t>a/r?a=r*t:r=a/t,o.mat4.ortho(o.mat4.create(),-a/2,a/2,-r/2,r/2,0,n)}function e(t,a){return Math.random()*(a-t)+t}a.b=n,a.a=e;var o=r(2);r.n(o)},function(t,a,r){"use strict";function n(){let t=document.getElementById("glCanvas");if(t.onclick=function(){document.fullscreenElement?document.exitFullscreen():t.requestFullscreen()},!(h=t.getContext("webgl2")))throw"Could not create WebGL context";e(),window.requestAnimationFrame(o)}function e(){M=new i.a(h),f=new l.a(h),m=new u.a(h),h.enable(h.DEPTH_TEST),h.enable(h.CULL_FACE)}function o(t){let a=h.canvas.clientWidth*(devicePixelRatio||1),r=h.canvas.clientHeight*(devicePixelRatio||1);h.canvas.width==a&&h.canvas.height==r||(h.canvas.width=a,h.canvas.height=r,c=a/r,m.generate(c)),m.bind(),h.clear(h.COLOR_BUFFER_BIT|h.DEPTH_BUFFER_BIT),M.render(m.aspect(),t),f.render(m.aspect(),t),m.unbind(),h.viewport(0,0,a,r),m.render(c,t),window.requestAnimationFrame(o)}Object.defineProperty(a,"__esModule",{value:!0});var i=r(9),l=r(23),s=r(24),u=(r.n(s),r(25));let h,c,M,f,m;document.body.onload=n},function(t,a,r){"use strict";var n=r(2),e=(r.n(n),r(1)),o=r(3),i=r(22);class l{constructor(t){this.gl=t,this.shaderProgram=new o.a(t,"gem.vsh","gem.fsh"),this.VAO=t.createVertexArray();let a=t.createBuffer();t.bindVertexArray(this.VAO),t.bindBuffer(t.ARRAY_BUFFER,a),t.bufferData(t.ARRAY_BUFFER,new Float32Array(e.a.gem.vertecies),t.STATIC_DRAW),t.vertexAttribPointer(0,3,t.FLOAT,!1,24,0),t.enableVertexAttribArray(0),t.vertexAttribPointer(1,3,t.FLOAT,!1,24,12),t.enableVertexAttribArray(1),t.bindBuffer(t.ARRAY_BUFFER,null),t.bindVertexArray(null)}render(t,a){this.shaderProgram.use(),i.a(this.shaderProgram,t);let r=n.mat4.create();n.mat4.rotateZ(r,r,a/e.a.gem.speed),this.shaderProgram.uniformMatrix("model",r),this.shaderProgram.uniform(4,"objectColour",e.a.gem.colour),this.shaderProgram.uniform(3,"lightColour",e.a.light.colour),this.shaderProgram.uniform(3,"lightDir",e.a.light.dir),this.shaderProgram.uniform(1,"ambientStrength",e.a.light.ambientStrength),this.shaderProgram.uniform(1,"specStrength",e.a.gem.specStrength),this.gl.bindVertexArray(this.VAO),this.gl.drawArrays(this.gl.TRIANGLES,0,e.a.gem.vertecies.length/6)}}a.a=l},function(t,a,r){var n=r(0),e={};e.create=function(){var t=new n.ARRAY_TYPE(4);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},e.clone=function(t){var a=new n.ARRAY_TYPE(4);return a[0]=t[0],a[1]=t[1],a[2]=t[2],a[3]=t[3],a},e.copy=function(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t},e.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},e.fromValues=function(t,a,r,e){var o=new n.ARRAY_TYPE(4);return o[0]=t,o[1]=a,o[2]=r,o[3]=e,o},e.set=function(t,a,r,n,e){return t[0]=a,t[1]=r,t[2]=n,t[3]=e,t},e.transpose=function(t,a){if(t===a){var r=a[1];t[1]=a[2],t[2]=r}else t[0]=a[0],t[1]=a[2],t[2]=a[1],t[3]=a[3];return t},e.invert=function(t,a){var r=a[0],n=a[1],e=a[2],o=a[3],i=r*o-e*n;return i?(i=1/i,t[0]=o*i,t[1]=-n*i,t[2]=-e*i,t[3]=r*i,t):null},e.adjoint=function(t,a){var r=a[0];return t[0]=a[3],t[1]=-a[1],t[2]=-a[2],t[3]=r,t},e.determinant=function(t){return t[0]*t[3]-t[2]*t[1]},e.multiply=function(t,a,r){var n=a[0],e=a[1],o=a[2],i=a[3],l=r[0],s=r[1],u=r[2],h=r[3];return t[0]=n*l+o*s,t[1]=e*l+i*s,t[2]=n*u+o*h,t[3]=e*u+i*h,t},e.mul=e.multiply,e.rotate=function(t,a,r){var n=a[0],e=a[1],o=a[2],i=a[3],l=Math.sin(r),s=Math.cos(r);return t[0]=n*s+o*l,t[1]=e*s+i*l,t[2]=n*-l+o*s,t[3]=e*-l+i*s,t},e.scale=function(t,a,r){var n=a[0],e=a[1],o=a[2],i=a[3],l=r[0],s=r[1];return t[0]=n*l,t[1]=e*l,t[2]=o*s,t[3]=i*s,t},e.fromRotation=function(t,a){var r=Math.sin(a),n=Math.cos(a);return t[0]=n,t[1]=r,t[2]=-r,t[3]=n,t},e.fromScaling=function(t,a){return t[0]=a[0],t[1]=0,t[2]=0,t[3]=a[1],t},e.str=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},e.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2))},e.LDU=function(t,a,r,n){return t[2]=n[2]/n[0],r[0]=n[0],r[1]=n[1],r[3]=n[3]-t[2]*r[1],[t,a,r]},e.add=function(t,a,r){return t[0]=a[0]+r[0],t[1]=a[1]+r[1],t[2]=a[2]+r[2],t[3]=a[3]+r[3],t},e.subtract=function(t,a,r){return t[0]=a[0]-r[0],t[1]=a[1]-r[1],t[2]=a[2]-r[2],t[3]=a[3]-r[3],t},e.sub=e.subtract,e.exactEquals=function(t,a){return t[0]===a[0]&&t[1]===a[1]&&t[2]===a[2]&&t[3]===a[3]},e.equals=function(t,a){var r=t[0],e=t[1],o=t[2],i=t[3],l=a[0],s=a[1],u=a[2],h=a[3];return Math.abs(r-l)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(e-s)<=n.EPSILON*Math.max(1,Math.abs(e),Math.abs(s))&&Math.abs(o-u)<=n.EPSILON*Math.max(1,Math.abs(o),Math.abs(u))&&Math.abs(i-h)<=n.EPSILON*Math.max(1,Math.abs(i),Math.abs(h))},e.multiplyScalar=function(t,a,r){return t[0]=a[0]*r,t[1]=a[1]*r,t[2]=a[2]*r,t[3]=a[3]*r,t},e.multiplyScalarAndAdd=function(t,a,r,n){return t[0]=a[0]+r[0]*n,t[1]=a[1]+r[1]*n,t[2]=a[2]+r[2]*n,t[3]=a[3]+r[3]*n,t},t.exports=e},function(t,a,r){var n=r(0),e={};e.create=function(){var t=new n.ARRAY_TYPE(6);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},e.clone=function(t){var a=new n.ARRAY_TYPE(6);return a[0]=t[0],a[1]=t[1],a[2]=t[2],a[3]=t[3],a[4]=t[4],a[5]=t[5],a},e.copy=function(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[4]=a[4],t[5]=a[5],t},e.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},e.fromValues=function(t,a,r,e,o,i){var l=new n.ARRAY_TYPE(6);return l[0]=t,l[1]=a,l[2]=r,l[3]=e,l[4]=o,l[5]=i,l},e.set=function(t,a,r,n,e,o,i){return t[0]=a,t[1]=r,t[2]=n,t[3]=e,t[4]=o,t[5]=i,t},e.invert=function(t,a){var r=a[0],n=a[1],e=a[2],o=a[3],i=a[4],l=a[5],s=r*o-n*e;return s?(s=1/s,t[0]=o*s,t[1]=-n*s,t[2]=-e*s,t[3]=r*s,t[4]=(e*l-o*i)*s,t[5]=(n*i-r*l)*s,t):null},e.determinant=function(t){return t[0]*t[3]-t[1]*t[2]},e.multiply=function(t,a,r){var n=a[0],e=a[1],o=a[2],i=a[3],l=a[4],s=a[5],u=r[0],h=r[1],c=r[2],M=r[3],f=r[4],m=r[5];return t[0]=n*u+o*h,t[1]=e*u+i*h,t[2]=n*c+o*M,t[3]=e*c+i*M,t[4]=n*f+o*m+l,t[5]=e*f+i*m+s,t},e.mul=e.multiply,e.rotate=function(t,a,r){var n=a[0],e=a[1],o=a[2],i=a[3],l=a[4],s=a[5],u=Math.sin(r),h=Math.cos(r);return t[0]=n*h+o*u,t[1]=e*h+i*u,t[2]=n*-u+o*h,t[3]=e*-u+i*h,t[4]=l,t[5]=s,t},e.scale=function(t,a,r){var n=a[0],e=a[1],o=a[2],i=a[3],l=a[4],s=a[5],u=r[0],h=r[1];return t[0]=n*u,t[1]=e*u,t[2]=o*h,t[3]=i*h,t[4]=l,t[5]=s,t},e.translate=function(t,a,r){var n=a[0],e=a[1],o=a[2],i=a[3],l=a[4],s=a[5],u=r[0],h=r[1];return t[0]=n,t[1]=e,t[2]=o,t[3]=i,t[4]=n*u+o*h+l,t[5]=e*u+i*h+s,t},e.fromRotation=function(t,a){var r=Math.sin(a),n=Math.cos(a);return t[0]=n,t[1]=r,t[2]=-r,t[3]=n,t[4]=0,t[5]=0,t},e.fromScaling=function(t,a){return t[0]=a[0],t[1]=0,t[2]=0,t[3]=a[1],t[4]=0,t[5]=0,t},e.fromTranslation=function(t,a){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=a[0],t[5]=a[1],t},e.str=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},e.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+1)},e.add=function(t,a,r){return t[0]=a[0]+r[0],t[1]=a[1]+r[1],t[2]=a[2]+r[2],t[3]=a[3]+r[3],t[4]=a[4]+r[4],t[5]=a[5]+r[5],t},e.subtract=function(t,a,r){return t[0]=a[0]-r[0],t[1]=a[1]-r[1],t[2]=a[2]-r[2],t[3]=a[3]-r[3],t[4]=a[4]-r[4],t[5]=a[5]-r[5],t},e.sub=e.subtract,e.multiplyScalar=function(t,a,r){return t[0]=a[0]*r,t[1]=a[1]*r,t[2]=a[2]*r,t[3]=a[3]*r,t[4]=a[4]*r,t[5]=a[5]*r,t},e.multiplyScalarAndAdd=function(t,a,r,n){return t[0]=a[0]+r[0]*n,t[1]=a[1]+r[1]*n,t[2]=a[2]+r[2]*n,t[3]=a[3]+r[3]*n,t[4]=a[4]+r[4]*n,t[5]=a[5]+r[5]*n,t},e.exactEquals=function(t,a){return t[0]===a[0]&&t[1]===a[1]&&t[2]===a[2]&&t[3]===a[3]&&t[4]===a[4]&&t[5]===a[5]},e.equals=function(t,a){var r=t[0],e=t[1],o=t[2],i=t[3],l=t[4],s=t[5],u=a[0],h=a[1],c=a[2],M=a[3],f=a[4],m=a[5];return Math.abs(r-u)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(e-h)<=n.EPSILON*Math.max(1,Math.abs(e),Math.abs(h))&&Math.abs(o-c)<=n.EPSILON*Math.max(1,Math.abs(o),Math.abs(c))&&Math.abs(i-M)<=n.EPSILON*Math.max(1,Math.abs(i),Math.abs(M))&&Math.abs(l-f)<=n.EPSILON*Math.max(1,Math.abs(l),Math.abs(f))&&Math.abs(s-m)<=n.EPSILON*Math.max(1,Math.abs(s),Math.abs(m))},t.exports=e},function(t,a,r){var n=r(0),e={scalar:{},SIMD:{}};e.create=function(){var t=new n.ARRAY_TYPE(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.clone=function(t){var a=new n.ARRAY_TYPE(16);return a[0]=t[0],a[1]=t[1],a[2]=t[2],a[3]=t[3],a[4]=t[4],a[5]=t[5],a[6]=t[6],a[7]=t[7],a[8]=t[8],a[9]=t[9],a[10]=t[10],a[11]=t[11],a[12]=t[12],a[13]=t[13],a[14]=t[14],a[15]=t[15],a},e.copy=function(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[4]=a[4],t[5]=a[5],t[6]=a[6],t[7]=a[7],t[8]=a[8],t[9]=a[9],t[10]=a[10],t[11]=a[11],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15],t},e.fromValues=function(t,a,r,e,o,i,l,s,u,h,c,M,f,m,x,d){var S=new n.ARRAY_TYPE(16);return S[0]=t,S[1]=a,S[2]=r,S[3]=e,S[4]=o,S[5]=i,S[6]=l,S[7]=s,S[8]=u,S[9]=h,S[10]=c,S[11]=M,S[12]=f,S[13]=m,S[14]=x,S[15]=d,S},e.set=function(t,a,r,n,e,o,i,l,s,u,h,c,M,f,m,x,d){return t[0]=a,t[1]=r,t[2]=n,t[3]=e,t[4]=o,t[5]=i,t[6]=l,t[7]=s,t[8]=u,t[9]=h,t[10]=c,t[11]=M,t[12]=f,t[13]=m,t[14]=x,t[15]=d,t},e.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.scalar.transpose=function(t,a){if(t===a){var r=a[1],n=a[2],e=a[3],o=a[6],i=a[7],l=a[11];t[1]=a[4],t[2]=a[8],t[3]=a[12],t[4]=r,t[6]=a[9],t[7]=a[13],t[8]=n,t[9]=o,t[11]=a[14],t[12]=e,t[13]=i,t[14]=l}else t[0]=a[0],t[1]=a[4],t[2]=a[8],t[3]=a[12],t[4]=a[1],t[5]=a[5],t[6]=a[9],t[7]=a[13],t[8]=a[2],t[9]=a[6],t[10]=a[10],t[11]=a[14],t[12]=a[3],t[13]=a[7],t[14]=a[11],t[15]=a[15];return t},e.SIMD.transpose=function(t,a){var r,n,e,o,i,l,s,u,h,c;return r=SIMD.Float32x4.load(a,0),n=SIMD.Float32x4.load(a,4),e=SIMD.Float32x4.load(a,8),o=SIMD.Float32x4.load(a,12),i=SIMD.Float32x4.shuffle(r,n,0,1,4,5),l=SIMD.Float32x4.shuffle(e,o,0,1,4,5),s=SIMD.Float32x4.shuffle(i,l,0,2,4,6),u=SIMD.Float32x4.shuffle(i,l,1,3,5,7),SIMD.Float32x4.store(t,0,s),SIMD.Float32x4.store(t,4,u),i=SIMD.Float32x4.shuffle(r,n,2,3,6,7),l=SIMD.Float32x4.shuffle(e,o,2,3,6,7),h=SIMD.Float32x4.shuffle(i,l,0,2,4,6),c=SIMD.Float32x4.shuffle(i,l,1,3,5,7),SIMD.Float32x4.store(t,8,h),SIMD.Float32x4.store(t,12,c),t},e.transpose=n.USE_SIMD?e.SIMD.transpose:e.scalar.transpose,e.scalar.invert=function(t,a){var r=a[0],n=a[1],e=a[2],o=a[3],i=a[4],l=a[5],s=a[6],u=a[7],h=a[8],c=a[9],M=a[10],f=a[11],m=a[12],x=a[13],d=a[14],S=a[15],I=r*l-n*i,D=r*s-e*i,F=r*u-o*i,p=n*s-e*l,v=n*u-o*l,b=e*u-o*s,g=h*x-c*m,A=h*d-M*m,E=h*S-f*m,w=c*d-M*x,z=c*S-f*x,R=M*S-f*d,P=I*R-D*z+F*w+p*E-v*A+b*g;return P?(P=1/P,t[0]=(l*R-s*z+u*w)*P,t[1]=(e*z-n*R-o*w)*P,t[2]=(x*b-d*v+S*p)*P,t[3]=(M*v-c*b-f*p)*P,t[4]=(s*E-i*R-u*A)*P,t[5]=(r*R-e*E+o*A)*P,t[6]=(d*F-m*b-S*D)*P,t[7]=(h*b-M*F+f*D)*P,t[8]=(i*z-l*E+u*g)*P,t[9]=(n*E-r*z-o*g)*P,t[10]=(m*v-x*F+S*I)*P,t[11]=(c*F-h*v-f*I)*P,t[12]=(l*A-i*w-s*g)*P,t[13]=(r*w-n*A+e*g)*P,t[14]=(x*D-m*p-d*I)*P,t[15]=(h*p-c*D+M*I)*P,t):null},e.SIMD.invert=function(t,a){var r,n,e,o,i,l,s,u,h,c,M=SIMD.Float32x4.load(a,0),f=SIMD.Float32x4.load(a,4),m=SIMD.Float32x4.load(a,8),x=SIMD.Float32x4.load(a,12);return i=SIMD.Float32x4.shuffle(M,f,0,1,4,5),n=SIMD.Float32x4.shuffle(m,x,0,1,4,5),r=SIMD.Float32x4.shuffle(i,n,0,2,4,6),n=SIMD.Float32x4.shuffle(n,i,1,3,5,7),i=SIMD.Float32x4.shuffle(M,f,2,3,6,7),o=SIMD.Float32x4.shuffle(m,x,2,3,6,7),e=SIMD.Float32x4.shuffle(i,o,0,2,4,6),o=SIMD.Float32x4.shuffle(o,i,1,3,5,7),i=SIMD.Float32x4.mul(e,o),i=SIMD.Float32x4.swizzle(i,1,0,3,2),l=SIMD.Float32x4.mul(n,i),s=SIMD.Float32x4.mul(r,i),i=SIMD.Float32x4.swizzle(i,2,3,0,1),l=SIMD.Float32x4.sub(SIMD.Float32x4.mul(n,i),l),s=SIMD.Float32x4.sub(SIMD.Float32x4.mul(r,i),s),s=SIMD.Float32x4.swizzle(s,2,3,0,1),i=SIMD.Float32x4.mul(n,e),i=SIMD.Float32x4.swizzle(i,1,0,3,2),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,i),l),h=SIMD.Float32x4.mul(r,i),i=SIMD.Float32x4.swizzle(i,2,3,0,1),l=SIMD.Float32x4.sub(l,SIMD.Float32x4.mul(o,i)),h=SIMD.Float32x4.sub(SIMD.Float32x4.mul(r,i),h),h=SIMD.Float32x4.swizzle(h,2,3,0,1),i=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(n,2,3,0,1),o),i=SIMD.Float32x4.swizzle(i,1,0,3,2),e=SIMD.Float32x4.swizzle(e,2,3,0,1),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(e,i),l),u=SIMD.Float32x4.mul(r,i),i=SIMD.Float32x4.swizzle(i,2,3,0,1),l=SIMD.Float32x4.sub(l,SIMD.Float32x4.mul(e,i)),u=SIMD.Float32x4.sub(SIMD.Float32x4.mul(r,i),u),u=SIMD.Float32x4.swizzle(u,2,3,0,1),i=SIMD.Float32x4.mul(r,n),i=SIMD.Float32x4.swizzle(i,1,0,3,2),u=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,i),u),h=SIMD.Float32x4.sub(SIMD.Float32x4.mul(e,i),h),i=SIMD.Float32x4.swizzle(i,2,3,0,1),u=SIMD.Float32x4.sub(SIMD.Float32x4.mul(o,i),u),h=SIMD.Float32x4.sub(h,SIMD.Float32x4.mul(e,i)),i=SIMD.Float32x4.mul(r,o),i=SIMD.Float32x4.swizzle(i,1,0,3,2),s=SIMD.Float32x4.sub(s,SIMD.Float32x4.mul(e,i)),u=SIMD.Float32x4.add(SIMD.Float32x4.mul(n,i),u),i=SIMD.Float32x4.swizzle(i,2,3,0,1),s=SIMD.Float32x4.add(SIMD.Float32x4.mul(e,i),s),u=SIMD.Float32x4.sub(u,SIMD.Float32x4.mul(n,i)),i=SIMD.Float32x4.mul(r,e),i=SIMD.Float32x4.swizzle(i,1,0,3,2),s=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,i),s),h=SIMD.Float32x4.sub(h,SIMD.Float32x4.mul(n,i)),i=SIMD.Float32x4.swizzle(i,2,3,0,1),s=SIMD.Float32x4.sub(s,SIMD.Float32x4.mul(o,i)),h=SIMD.Float32x4.add(SIMD.Float32x4.mul(n,i),h),c=SIMD.Float32x4.mul(r,l),c=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(c,2,3,0,1),c),c=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(c,1,0,3,2),c),i=SIMD.Float32x4.reciprocalApproximation(c),c=SIMD.Float32x4.sub(SIMD.Float32x4.add(i,i),SIMD.Float32x4.mul(c,SIMD.Float32x4.mul(i,i))),(c=SIMD.Float32x4.swizzle(c,0,0,0,0))?(SIMD.Float32x4.store(t,0,SIMD.Float32x4.mul(c,l)),SIMD.Float32x4.store(t,4,SIMD.Float32x4.mul(c,s)),SIMD.Float32x4.store(t,8,SIMD.Float32x4.mul(c,u)),SIMD.Float32x4.store(t,12,SIMD.Float32x4.mul(c,h)),t):null},e.invert=n.USE_SIMD?e.SIMD.invert:e.scalar.invert,e.scalar.adjoint=function(t,a){var r=a[0],n=a[1],e=a[2],o=a[3],i=a[4],l=a[5],s=a[6],u=a[7],h=a[8],c=a[9],M=a[10],f=a[11],m=a[12],x=a[13],d=a[14],S=a[15];return t[0]=l*(M*S-f*d)-c*(s*S-u*d)+x*(s*f-u*M),t[1]=-(n*(M*S-f*d)-c*(e*S-o*d)+x*(e*f-o*M)),t[2]=n*(s*S-u*d)-l*(e*S-o*d)+x*(e*u-o*s),t[3]=-(n*(s*f-u*M)-l*(e*f-o*M)+c*(e*u-o*s)),t[4]=-(i*(M*S-f*d)-h*(s*S-u*d)+m*(s*f-u*M)),t[5]=r*(M*S-f*d)-h*(e*S-o*d)+m*(e*f-o*M),t[6]=-(r*(s*S-u*d)-i*(e*S-o*d)+m*(e*u-o*s)),t[7]=r*(s*f-u*M)-i*(e*f-o*M)+h*(e*u-o*s),t[8]=i*(c*S-f*x)-h*(l*S-u*x)+m*(l*f-u*c),t[9]=-(r*(c*S-f*x)-h*(n*S-o*x)+m*(n*f-o*c)),t[10]=r*(l*S-u*x)-i*(n*S-o*x)+m*(n*u-o*l),t[11]=-(r*(l*f-u*c)-i*(n*f-o*c)+h*(n*u-o*l)),t[12]=-(i*(c*d-M*x)-h*(l*d-s*x)+m*(l*M-s*c)),t[13]=r*(c*d-M*x)-h*(n*d-e*x)+m*(n*M-e*c),t[14]=-(r*(l*d-s*x)-i*(n*d-e*x)+m*(n*s-e*l)),t[15]=r*(l*M-s*c)-i*(n*M-e*c)+h*(n*s-e*l),t},e.SIMD.adjoint=function(t,a){var r,n,e,o,i,l,s,u,h,c,M,f,m,r=SIMD.Float32x4.load(a,0),n=SIMD.Float32x4.load(a,4),e=SIMD.Float32x4.load(a,8),o=SIMD.Float32x4.load(a,12);return h=SIMD.Float32x4.shuffle(r,n,0,1,4,5),l=SIMD.Float32x4.shuffle(e,o,0,1,4,5),i=SIMD.Float32x4.shuffle(h,l,0,2,4,6),l=SIMD.Float32x4.shuffle(l,h,1,3,5,7),h=SIMD.Float32x4.shuffle(r,n,2,3,6,7),u=SIMD.Float32x4.shuffle(e,o,2,3,6,7),s=SIMD.Float32x4.shuffle(h,u,0,2,4,6),u=SIMD.Float32x4.shuffle(u,h,1,3,5,7),h=SIMD.Float32x4.mul(s,u),h=SIMD.Float32x4.swizzle(h,1,0,3,2),c=SIMD.Float32x4.mul(l,h),M=SIMD.Float32x4.mul(i,h),h=SIMD.Float32x4.swizzle(h,2,3,0,1),c=SIMD.Float32x4.sub(SIMD.Float32x4.mul(l,h),c),M=SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,h),M),M=SIMD.Float32x4.swizzle(M,2,3,0,1),h=SIMD.Float32x4.mul(l,s),h=SIMD.Float32x4.swizzle(h,1,0,3,2),c=SIMD.Float32x4.add(SIMD.Float32x4.mul(u,h),c),m=SIMD.Float32x4.mul(i,h),h=SIMD.Float32x4.swizzle(h,2,3,0,1),c=SIMD.Float32x4.sub(c,SIMD.Float32x4.mul(u,h)),m=SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,h),m),m=SIMD.Float32x4.swizzle(m,2,3,0,1),h=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,2,3,0,1),u),h=SIMD.Float32x4.swizzle(h,1,0,3,2),s=SIMD.Float32x4.swizzle(s,2,3,0,1),c=SIMD.Float32x4.add(SIMD.Float32x4.mul(s,h),c),f=SIMD.Float32x4.mul(i,h),h=SIMD.Float32x4.swizzle(h,2,3,0,1),c=SIMD.Float32x4.sub(c,SIMD.Float32x4.mul(s,h)),f=SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,h),f),f=SIMD.Float32x4.swizzle(f,2,3,0,1),h=SIMD.Float32x4.mul(i,l),h=SIMD.Float32x4.swizzle(h,1,0,3,2),f=SIMD.Float32x4.add(SIMD.Float32x4.mul(u,h),f),m=SIMD.Float32x4.sub(SIMD.Float32x4.mul(s,h),m),h=SIMD.Float32x4.swizzle(h,2,3,0,1),f=SIMD.Float32x4.sub(SIMD.Float32x4.mul(u,h),f),m=SIMD.Float32x4.sub(m,SIMD.Float32x4.mul(s,h)),h=SIMD.Float32x4.mul(i,u),h=SIMD.Float32x4.swizzle(h,1,0,3,2),M=SIMD.Float32x4.sub(M,SIMD.Float32x4.mul(s,h)),f=SIMD.Float32x4.add(SIMD.Float32x4.mul(l,h),f),h=SIMD.Float32x4.swizzle(h,2,3,0,1),M=SIMD.Float32x4.add(SIMD.Float32x4.mul(s,h),M),f=SIMD.Float32x4.sub(f,SIMD.Float32x4.mul(l,h)),h=SIMD.Float32x4.mul(i,s),h=SIMD.Float32x4.swizzle(h,1,0,3,2),M=SIMD.Float32x4.add(SIMD.Float32x4.mul(u,h),M),m=SIMD.Float32x4.sub(m,SIMD.Float32x4.mul(l,h)),h=SIMD.Float32x4.swizzle(h,2,3,0,1),M=SIMD.Float32x4.sub(M,SIMD.Float32x4.mul(u,h)),m=SIMD.Float32x4.add(SIMD.Float32x4.mul(l,h),m),SIMD.Float32x4.store(t,0,c),SIMD.Float32x4.store(t,4,M),SIMD.Float32x4.store(t,8,f),SIMD.Float32x4.store(t,12,m),t},e.adjoint=n.USE_SIMD?e.SIMD.adjoint:e.scalar.adjoint,e.determinant=function(t){var a=t[0],r=t[1],n=t[2],e=t[3],o=t[4],i=t[5],l=t[6],s=t[7],u=t[8],h=t[9],c=t[10],M=t[11],f=t[12],m=t[13],x=t[14],d=t[15];return(a*i-r*o)*(c*d-M*x)-(a*l-n*o)*(h*d-M*m)+(a*s-e*o)*(h*x-c*m)+(r*l-n*i)*(u*d-M*f)-(r*s-e*i)*(u*x-c*f)+(n*s-e*l)*(u*m-h*f)},e.SIMD.multiply=function(t,a,r){var n=SIMD.Float32x4.load(a,0),e=SIMD.Float32x4.load(a,4),o=SIMD.Float32x4.load(a,8),i=SIMD.Float32x4.load(a,12),l=SIMD.Float32x4.load(r,0),s=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,0,0,0,0),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,1,1,1,1),e),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,3,3,3,3),i))));SIMD.Float32x4.store(t,0,s);var u=SIMD.Float32x4.load(r,4),h=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,0,0,0,0),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,1,1,1,1),e),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,3,3,3,3),i))));SIMD.Float32x4.store(t,4,h);var c=SIMD.Float32x4.load(r,8),M=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,0,0,0,0),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,1,1,1,1),e),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,3,3,3,3),i))));SIMD.Float32x4.store(t,8,M);var f=SIMD.Float32x4.load(r,12),m=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,0,0,0,0),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,1,1,1,1),e),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,3,3,3,3),i))));return SIMD.Float32x4.store(t,12,m),t},e.scalar.multiply=function(t,a,r){var n=a[0],e=a[1],o=a[2],i=a[3],l=a[4],s=a[5],u=a[6],h=a[7],c=a[8],M=a[9],f=a[10],m=a[11],x=a[12],d=a[13],S=a[14],I=a[15],D=r[0],F=r[1],p=r[2],v=r[3];return t[0]=D*n+F*l+p*c+v*x,t[1]=D*e+F*s+p*M+v*d,t[2]=D*o+F*u+p*f+v*S,t[3]=D*i+F*h+p*m+v*I,D=r[4],F=r[5],p=r[6],v=r[7],t[4]=D*n+F*l+p*c+v*x,t[5]=D*e+F*s+p*M+v*d,t[6]=D*o+F*u+p*f+v*S,t[7]=D*i+F*h+p*m+v*I,D=r[8],F=r[9],p=r[10],v=r[11],t[8]=D*n+F*l+p*c+v*x,t[9]=D*e+F*s+p*M+v*d,t[10]=D*o+F*u+p*f+v*S,t[11]=D*i+F*h+p*m+v*I,D=r[12],F=r[13],p=r[14],v=r[15],t[12]=D*n+F*l+p*c+v*x,t[13]=D*e+F*s+p*M+v*d,t[14]=D*o+F*u+p*f+v*S,t[15]=D*i+F*h+p*m+v*I,t},e.multiply=n.USE_SIMD?e.SIMD.multiply:e.scalar.multiply,e.mul=e.multiply,e.scalar.translate=function(t,a,r){var n,e,o,i,l,s,u,h,c,M,f,m,x=r[0],d=r[1],S=r[2];return a===t?(t[12]=a[0]*x+a[4]*d+a[8]*S+a[12],t[13]=a[1]*x+a[5]*d+a[9]*S+a[13],t[14]=a[2]*x+a[6]*d+a[10]*S+a[14],t[15]=a[3]*x+a[7]*d+a[11]*S+a[15]):(n=a[0],e=a[1],o=a[2],i=a[3],l=a[4],s=a[5],u=a[6],h=a[7],c=a[8],M=a[9],f=a[10],m=a[11],t[0]=n,t[1]=e,t[2]=o,t[3]=i,t[4]=l,t[5]=s,t[6]=u,t[7]=h,t[8]=c,t[9]=M,t[10]=f,t[11]=m,t[12]=n*x+l*d+c*S+a[12],t[13]=e*x+s*d+M*S+a[13],t[14]=o*x+u*d+f*S+a[14],t[15]=i*x+h*d+m*S+a[15]),t},e.SIMD.translate=function(t,a,r){var n=SIMD.Float32x4.load(a,0),e=SIMD.Float32x4.load(a,4),o=SIMD.Float32x4.load(a,8),i=SIMD.Float32x4.load(a,12),l=SIMD.Float32x4(r[0],r[1],r[2],0);a!==t&&(t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[4]=a[4],t[5]=a[5],t[6]=a[6],t[7]=a[7],t[8]=a[8],t[9]=a[9],t[10]=a[10],t[11]=a[11]),n=SIMD.Float32x4.mul(n,SIMD.Float32x4.swizzle(l,0,0,0,0)),e=SIMD.Float32x4.mul(e,SIMD.Float32x4.swizzle(l,1,1,1,1)),o=SIMD.Float32x4.mul(o,SIMD.Float32x4.swizzle(l,2,2,2,2));var s=SIMD.Float32x4.add(n,SIMD.Float32x4.add(e,SIMD.Float32x4.add(o,i)));return SIMD.Float32x4.store(t,12,s),t},e.translate=n.USE_SIMD?e.SIMD.translate:e.scalar.translate,e.scalar.scale=function(t,a,r){var n=r[0],e=r[1],o=r[2];return t[0]=a[0]*n,t[1]=a[1]*n,t[2]=a[2]*n,t[3]=a[3]*n,t[4]=a[4]*e,t[5]=a[5]*e,t[6]=a[6]*e,t[7]=a[7]*e,t[8]=a[8]*o,t[9]=a[9]*o,t[10]=a[10]*o,t[11]=a[11]*o,t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15],t},e.SIMD.scale=function(t,a,r){var n,e,o,i=SIMD.Float32x4(r[0],r[1],r[2],0);return n=SIMD.Float32x4.load(a,0),SIMD.Float32x4.store(t,0,SIMD.Float32x4.mul(n,SIMD.Float32x4.swizzle(i,0,0,0,0))),e=SIMD.Float32x4.load(a,4),SIMD.Float32x4.store(t,4,SIMD.Float32x4.mul(e,SIMD.Float32x4.swizzle(i,1,1,1,1))),o=SIMD.Float32x4.load(a,8),SIMD.Float32x4.store(t,8,SIMD.Float32x4.mul(o,SIMD.Float32x4.swizzle(i,2,2,2,2))),t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15],t},e.scale=n.USE_SIMD?e.SIMD.scale:e.scalar.scale,e.rotate=function(t,a,r,e){var o,i,l,s,u,h,c,M,f,m,x,d,S,I,D,F,p,v,b,g,A,E,w,z,R=e[0],P=e[1],y=e[2],T=Math.sqrt(R*R+P*P+y*y);return Math.abs(T)<n.EPSILON?null:(T=1/T,R*=T,P*=T,y*=T,o=Math.sin(r),i=Math.cos(r),l=1-i,s=a[0],u=a[1],h=a[2],c=a[3],M=a[4],f=a[5],m=a[6],x=a[7],d=a[8],S=a[9],I=a[10],D=a[11],F=R*R*l+i,p=P*R*l+y*o,v=y*R*l-P*o,b=R*P*l-y*o,g=P*P*l+i,A=y*P*l+R*o,E=R*y*l+P*o,w=P*y*l-R*o,z=y*y*l+i,t[0]=s*F+M*p+d*v,t[1]=u*F+f*p+S*v,t[2]=h*F+m*p+I*v,t[3]=c*F+x*p+D*v,t[4]=s*b+M*g+d*A,t[5]=u*b+f*g+S*A,t[6]=h*b+m*g+I*A,t[7]=c*b+x*g+D*A,t[8]=s*E+M*w+d*z,t[9]=u*E+f*w+S*z,t[10]=h*E+m*w+I*z,t[11]=c*E+x*w+D*z,a!==t&&(t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]),t)},e.scalar.rotateX=function(t,a,r){var n=Math.sin(r),e=Math.cos(r),o=a[4],i=a[5],l=a[6],s=a[7],u=a[8],h=a[9],c=a[10],M=a[11];return a!==t&&(t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]),t[4]=o*e+u*n,t[5]=i*e+h*n,t[6]=l*e+c*n,t[7]=s*e+M*n,t[8]=u*e-o*n,t[9]=h*e-i*n,t[10]=c*e-l*n,t[11]=M*e-s*n,t},e.SIMD.rotateX=function(t,a,r){var n=SIMD.Float32x4.splat(Math.sin(r)),e=SIMD.Float32x4.splat(Math.cos(r));a!==t&&(t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]);var o=SIMD.Float32x4.load(a,4),i=SIMD.Float32x4.load(a,8);return SIMD.Float32x4.store(t,4,SIMD.Float32x4.add(SIMD.Float32x4.mul(o,e),SIMD.Float32x4.mul(i,n))),SIMD.Float32x4.store(t,8,SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,e),SIMD.Float32x4.mul(o,n))),t},e.rotateX=n.USE_SIMD?e.SIMD.rotateX:e.scalar.rotateX,e.scalar.rotateY=function(t,a,r){var n=Math.sin(r),e=Math.cos(r),o=a[0],i=a[1],l=a[2],s=a[3],u=a[8],h=a[9],c=a[10],M=a[11];return a!==t&&(t[4]=a[4],t[5]=a[5],t[6]=a[6],t[7]=a[7],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]),t[0]=o*e-u*n,t[1]=i*e-h*n,t[2]=l*e-c*n,t[3]=s*e-M*n,t[8]=o*n+u*e,t[9]=i*n+h*e,t[10]=l*n+c*e,t[11]=s*n+M*e,t},e.SIMD.rotateY=function(t,a,r){var n=SIMD.Float32x4.splat(Math.sin(r)),e=SIMD.Float32x4.splat(Math.cos(r));a!==t&&(t[4]=a[4],t[5]=a[5],t[6]=a[6],t[7]=a[7],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]);var o=SIMD.Float32x4.load(a,0),i=SIMD.Float32x4.load(a,8);return SIMD.Float32x4.store(t,0,SIMD.Float32x4.sub(SIMD.Float32x4.mul(o,e),SIMD.Float32x4.mul(i,n))),SIMD.Float32x4.store(t,8,SIMD.Float32x4.add(SIMD.Float32x4.mul(o,n),SIMD.Float32x4.mul(i,e))),t},e.rotateY=n.USE_SIMD?e.SIMD.rotateY:e.scalar.rotateY,e.scalar.rotateZ=function(t,a,r){var n=Math.sin(r),e=Math.cos(r),o=a[0],i=a[1],l=a[2],s=a[3],u=a[4],h=a[5],c=a[6],M=a[7];return a!==t&&(t[8]=a[8],t[9]=a[9],t[10]=a[10],t[11]=a[11],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]),t[0]=o*e+u*n,t[1]=i*e+h*n,t[2]=l*e+c*n,t[3]=s*e+M*n,t[4]=u*e-o*n,t[5]=h*e-i*n,t[6]=c*e-l*n,t[7]=M*e-s*n,t},e.SIMD.rotateZ=function(t,a,r){var n=SIMD.Float32x4.splat(Math.sin(r)),e=SIMD.Float32x4.splat(Math.cos(r));a!==t&&(t[8]=a[8],t[9]=a[9],t[10]=a[10],t[11]=a[11],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]);var o=SIMD.Float32x4.load(a,0),i=SIMD.Float32x4.load(a,4);return SIMD.Float32x4.store(t,0,SIMD.Float32x4.add(SIMD.Float32x4.mul(o,e),SIMD.Float32x4.mul(i,n))),SIMD.Float32x4.store(t,4,SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,e),SIMD.Float32x4.mul(o,n))),t},e.rotateZ=n.USE_SIMD?e.SIMD.rotateZ:e.scalar.rotateZ,e.fromTranslation=function(t,a){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=a[0],t[13]=a[1],t[14]=a[2],t[15]=1,t},e.fromScaling=function(t,a){return t[0]=a[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=a[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.fromRotation=function(t,a,r){var e,o,i,l=r[0],s=r[1],u=r[2],h=Math.sqrt(l*l+s*s+u*u);return Math.abs(h)<n.EPSILON?null:(h=1/h,l*=h,s*=h,u*=h,e=Math.sin(a),o=Math.cos(a),i=1-o,t[0]=l*l*i+o,t[1]=s*l*i+u*e,t[2]=u*l*i-s*e,t[3]=0,t[4]=l*s*i-u*e,t[5]=s*s*i+o,t[6]=u*s*i+l*e,t[7]=0,t[8]=l*u*i+s*e,t[9]=s*u*i-l*e,t[10]=u*u*i+o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},e.fromXRotation=function(t,a){var r=Math.sin(a),n=Math.cos(a);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=r,t[7]=0,t[8]=0,t[9]=-r,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.fromYRotation=function(t,a){var r=Math.sin(a),n=Math.cos(a);return t[0]=n,t[1]=0,t[2]=-r,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=r,t[9]=0,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.fromZRotation=function(t,a){var r=Math.sin(a),n=Math.cos(a);return t[0]=n,t[1]=r,t[2]=0,t[3]=0,t[4]=-r,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.fromRotationTranslation=function(t,a,r){var n=a[0],e=a[1],o=a[2],i=a[3],l=n+n,s=e+e,u=o+o,h=n*l,c=n*s,M=n*u,f=e*s,m=e*u,x=o*u,d=i*l,S=i*s,I=i*u;return t[0]=1-(f+x),t[1]=c+I,t[2]=M-S,t[3]=0,t[4]=c-I,t[5]=1-(h+x),t[6]=m+d,t[7]=0,t[8]=M+S,t[9]=m-d,t[10]=1-(h+f),t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t},e.getTranslation=function(t,a){return t[0]=a[12],t[1]=a[13],t[2]=a[14],t},e.getRotation=function(t,a){var r=a[0]+a[5]+a[10],n=0;return r>0?(n=2*Math.sqrt(r+1),t[3]=.25*n,t[0]=(a[6]-a[9])/n,t[1]=(a[8]-a[2])/n,t[2]=(a[1]-a[4])/n):a[0]>a[5]&a[0]>a[10]?(n=2*Math.sqrt(1+a[0]-a[5]-a[10]),t[3]=(a[6]-a[9])/n,t[0]=.25*n,t[1]=(a[1]+a[4])/n,t[2]=(a[8]+a[2])/n):a[5]>a[10]?(n=2*Math.sqrt(1+a[5]-a[0]-a[10]),t[3]=(a[8]-a[2])/n,t[0]=(a[1]+a[4])/n,t[1]=.25*n,t[2]=(a[6]+a[9])/n):(n=2*Math.sqrt(1+a[10]-a[0]-a[5]),t[3]=(a[1]-a[4])/n,t[0]=(a[8]+a[2])/n,t[1]=(a[6]+a[9])/n,t[2]=.25*n),t},e.fromRotationTranslationScale=function(t,a,r,n){var e=a[0],o=a[1],i=a[2],l=a[3],s=e+e,u=o+o,h=i+i,c=e*s,M=e*u,f=e*h,m=o*u,x=o*h,d=i*h,S=l*s,I=l*u,D=l*h,F=n[0],p=n[1],v=n[2];return t[0]=(1-(m+d))*F,t[1]=(M+D)*F,t[2]=(f-I)*F,t[3]=0,t[4]=(M-D)*p,t[5]=(1-(c+d))*p,t[6]=(x+S)*p,t[7]=0,t[8]=(f+I)*v,t[9]=(x-S)*v,t[10]=(1-(c+m))*v,t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t},e.fromRotationTranslationScaleOrigin=function(t,a,r,n,e){var o=a[0],i=a[1],l=a[2],s=a[3],u=o+o,h=i+i,c=l+l,M=o*u,f=o*h,m=o*c,x=i*h,d=i*c,S=l*c,I=s*u,D=s*h,F=s*c,p=n[0],v=n[1],b=n[2],g=e[0],A=e[1],E=e[2];return t[0]=(1-(x+S))*p,t[1]=(f+F)*p,t[2]=(m-D)*p,t[3]=0,t[4]=(f-F)*v,t[5]=(1-(M+S))*v,t[6]=(d+I)*v,t[7]=0,t[8]=(m+D)*b,t[9]=(d-I)*b,t[10]=(1-(M+x))*b,t[11]=0,t[12]=r[0]+g-(t[0]*g+t[4]*A+t[8]*E),t[13]=r[1]+A-(t[1]*g+t[5]*A+t[9]*E),t[14]=r[2]+E-(t[2]*g+t[6]*A+t[10]*E),t[15]=1,t},e.fromQuat=function(t,a){var r=a[0],n=a[1],e=a[2],o=a[3],i=r+r,l=n+n,s=e+e,u=r*i,h=n*i,c=n*l,M=e*i,f=e*l,m=e*s,x=o*i,d=o*l,S=o*s;return t[0]=1-c-m,t[1]=h+S,t[2]=M-d,t[3]=0,t[4]=h-S,t[5]=1-u-m,t[6]=f+x,t[7]=0,t[8]=M+d,t[9]=f-x,t[10]=1-u-c,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.frustum=function(t,a,r,n,e,o,i){var l=1/(r-a),s=1/(e-n),u=1/(o-i);return t[0]=2*o*l,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*s,t[6]=0,t[7]=0,t[8]=(r+a)*l,t[9]=(e+n)*s,t[10]=(i+o)*u,t[11]=-1,t[12]=0,t[13]=0,t[14]=i*o*2*u,t[15]=0,t},e.perspective=function(t,a,r,n,e){var o=1/Math.tan(a/2),i=1/(n-e);return t[0]=o/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(e+n)*i,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*e*n*i,t[15]=0,t},e.perspectiveFromFieldOfView=function(t,a,r,n){var e=Math.tan(a.upDegrees*Math.PI/180),o=Math.tan(a.downDegrees*Math.PI/180),i=Math.tan(a.leftDegrees*Math.PI/180),l=Math.tan(a.rightDegrees*Math.PI/180),s=2/(i+l),u=2/(e+o);return t[0]=s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=u,t[6]=0,t[7]=0,t[8]=-(i-l)*s*.5,t[9]=(e-o)*u*.5,t[10]=n/(r-n),t[11]=-1,t[12]=0,t[13]=0,t[14]=n*r/(r-n),t[15]=0,t},e.ortho=function(t,a,r,n,e,o,i){var l=1/(a-r),s=1/(n-e),u=1/(o-i);return t[0]=-2*l,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*u,t[11]=0,t[12]=(a+r)*l,t[13]=(e+n)*s,t[14]=(i+o)*u,t[15]=1,t},e.lookAt=function(t,a,r,o){var i,l,s,u,h,c,M,f,m,x,d=a[0],S=a[1],I=a[2],D=o[0],F=o[1],p=o[2],v=r[0],b=r[1],g=r[2];return Math.abs(d-v)<n.EPSILON&&Math.abs(S-b)<n.EPSILON&&Math.abs(I-g)<n.EPSILON?e.identity(t):(M=d-v,f=S-b,m=I-g,x=1/Math.sqrt(M*M+f*f+m*m),M*=x,f*=x,m*=x,i=F*m-p*f,l=p*M-D*m,s=D*f-F*M,x=Math.sqrt(i*i+l*l+s*s),x?(x=1/x,i*=x,l*=x,s*=x):(i=0,l=0,s=0),u=f*s-m*l,h=m*i-M*s,c=M*l-f*i,x=Math.sqrt(u*u+h*h+c*c),x?(x=1/x,u*=x,h*=x,c*=x):(u=0,h=0,c=0),t[0]=i,t[1]=u,t[2]=M,t[3]=0,t[4]=l,t[5]=h,t[6]=f,t[7]=0,t[8]=s,t[9]=c,t[10]=m,t[11]=0,t[12]=-(i*d+l*S+s*I),t[13]=-(u*d+h*S+c*I),t[14]=-(M*d+f*S+m*I),t[15]=1,t)},e.str=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},e.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))},e.add=function(t,a,r){return t[0]=a[0]+r[0],t[1]=a[1]+r[1],t[2]=a[2]+r[2],t[3]=a[3]+r[3],t[4]=a[4]+r[4],t[5]=a[5]+r[5],t[6]=a[6]+r[6],t[7]=a[7]+r[7],t[8]=a[8]+r[8],t[9]=a[9]+r[9],t[10]=a[10]+r[10],t[11]=a[11]+r[11],t[12]=a[12]+r[12],t[13]=a[13]+r[13],t[14]=a[14]+r[14],t[15]=a[15]+r[15],t},e.subtract=function(t,a,r){return t[0]=a[0]-r[0],t[1]=a[1]-r[1],t[2]=a[2]-r[2],t[3]=a[3]-r[3],t[4]=a[4]-r[4],t[5]=a[5]-r[5],t[6]=a[6]-r[6],t[7]=a[7]-r[7],t[8]=a[8]-r[8],t[9]=a[9]-r[9],t[10]=a[10]-r[10],t[11]=a[11]-r[11],t[12]=a[12]-r[12],t[13]=a[13]-r[13],t[14]=a[14]-r[14],t[15]=a[15]-r[15],t},e.sub=e.subtract,e.multiplyScalar=function(t,a,r){return t[0]=a[0]*r,t[1]=a[1]*r,t[2]=a[2]*r,t[3]=a[3]*r,t[4]=a[4]*r,t[5]=a[5]*r,t[6]=a[6]*r,t[7]=a[7]*r,t[8]=a[8]*r,t[9]=a[9]*r,t[10]=a[10]*r,t[11]=a[11]*r,t[12]=a[12]*r,t[13]=a[13]*r,t[14]=a[14]*r,t[15]=a[15]*r,t},e.multiplyScalarAndAdd=function(t,a,r,n){return t[0]=a[0]+r[0]*n,t[1]=a[1]+r[1]*n,t[2]=a[2]+r[2]*n,t[3]=a[3]+r[3]*n,t[4]=a[4]+r[4]*n,t[5]=a[5]+r[5]*n,t[6]=a[6]+r[6]*n,t[7]=a[7]+r[7]*n,t[8]=a[8]+r[8]*n,t[9]=a[9]+r[9]*n,t[10]=a[10]+r[10]*n,t[11]=a[11]+r[11]*n,t[12]=a[12]+r[12]*n,t[13]=a[13]+r[13]*n,t[14]=a[14]+r[14]*n,t[15]=a[15]+r[15]*n,t},e.exactEquals=function(t,a){return t[0]===a[0]&&t[1]===a[1]&&t[2]===a[2]&&t[3]===a[3]&&t[4]===a[4]&&t[5]===a[5]&&t[6]===a[6]&&t[7]===a[7]&&t[8]===a[8]&&t[9]===a[9]&&t[10]===a[10]&&t[11]===a[11]&&t[12]===a[12]&&t[13]===a[13]&&t[14]===a[14]&&t[15]===a[15]},e.equals=function(t,a){var r=t[0],e=t[1],o=t[2],i=t[3],l=t[4],s=t[5],u=t[6],h=t[7],c=t[8],M=t[9],f=t[10],m=t[11],x=t[12],d=t[13],S=t[14],I=t[15],D=a[0],F=a[1],p=a[2],v=a[3],b=a[4],g=a[5],A=a[6],E=a[7],w=a[8],z=a[9],R=a[10],P=a[11],y=a[12],T=a[13],L=a[14],q=a[15];return Math.abs(r-D)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(D))&&Math.abs(e-F)<=n.EPSILON*Math.max(1,Math.abs(e),Math.abs(F))&&Math.abs(o-p)<=n.EPSILON*Math.max(1,Math.abs(o),Math.abs(p))&&Math.abs(i-v)<=n.EPSILON*Math.max(1,Math.abs(i),Math.abs(v))&&Math.abs(l-b)<=n.EPSILON*Math.max(1,Math.abs(l),Math.abs(b))&&Math.abs(s-g)<=n.EPSILON*Math.max(1,Math.abs(s),Math.abs(g))&&Math.abs(u-A)<=n.EPSILON*Math.max(1,Math.abs(u),Math.abs(A))&&Math.abs(h-E)<=n.EPSILON*Math.max(1,Math.abs(h),Math.abs(E))&&Math.abs(c-w)<=n.EPSILON*Math.max(1,Math.abs(c),Math.abs(w))&&Math.abs(M-z)<=n.EPSILON*Math.max(1,Math.abs(M),Math.abs(z))&&Math.abs(f-R)<=n.EPSILON*Math.max(1,Math.abs(f),Math.abs(R))&&Math.abs(m-P)<=n.EPSILON*Math.max(1,Math.abs(m),Math.abs(P))&&Math.abs(x-y)<=n.EPSILON*Math.max(1,Math.abs(x),Math.abs(y))&&Math.abs(d-T)<=n.EPSILON*Math.max(1,Math.abs(d),Math.abs(T))&&Math.abs(S-L)<=n.EPSILON*Math.max(1,Math.abs(S),Math.abs(L))&&Math.abs(I-q)<=n.EPSILON*Math.max(1,Math.abs(I),Math.abs(q))},t.exports=e},function(t,a,r){var n=r(0),e=r(4),o=r(5),i=r(6),l={};l.create=function(){var t=new n.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},l.rotationTo=function(){var t=o.create(),a=o.fromValues(1,0,0),r=o.fromValues(0,1,0);return function(n,e,i){var s=o.dot(e,i);return s<-.999999?(o.cross(t,a,e),o.length(t)<1e-6&&o.cross(t,r,e),o.normalize(t,t),l.setAxisAngle(n,t,Math.PI),n):s>.999999?(n[0]=0,n[1]=0,n[2]=0,n[3]=1,n):(o.cross(t,e,i),n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=1+s,l.normalize(n,n))}}(),l.setAxes=function(){var t=e.create();return function(a,r,n,e){return t[0]=n[0],t[3]=n[1],t[6]=n[2],t[1]=e[0],t[4]=e[1],t[7]=e[2],t[2]=-r[0],t[5]=-r[1],t[8]=-r[2],l.normalize(a,l.fromMat3(a,t))}}(),l.clone=i.clone,l.fromValues=i.fromValues,l.copy=i.copy,l.set=i.set,l.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},l.setAxisAngle=function(t,a,r){r*=.5;var n=Math.sin(r);return t[0]=n*a[0],t[1]=n*a[1],t[2]=n*a[2],t[3]=Math.cos(r),t},l.getAxisAngle=function(t,a){var r=2*Math.acos(a[3]),n=Math.sin(r/2);return 0!=n?(t[0]=a[0]/n,t[1]=a[1]/n,t[2]=a[2]/n):(t[0]=1,t[1]=0,t[2]=0),r},l.add=i.add,l.multiply=function(t,a,r){var n=a[0],e=a[1],o=a[2],i=a[3],l=r[0],s=r[1],u=r[2],h=r[3];return t[0]=n*h+i*l+e*u-o*s,t[1]=e*h+i*s+o*l-n*u,t[2]=o*h+i*u+n*s-e*l,t[3]=i*h-n*l-e*s-o*u,t},l.mul=l.multiply,l.scale=i.scale,l.rotateX=function(t,a,r){r*=.5;var n=a[0],e=a[1],o=a[2],i=a[3],l=Math.sin(r),s=Math.cos(r);return t[0]=n*s+i*l,t[1]=e*s+o*l,t[2]=o*s-e*l,t[3]=i*s-n*l,t},l.rotateY=function(t,a,r){r*=.5;var n=a[0],e=a[1],o=a[2],i=a[3],l=Math.sin(r),s=Math.cos(r);return t[0]=n*s-o*l,t[1]=e*s+i*l,t[2]=o*s+n*l,t[3]=i*s-e*l,t},l.rotateZ=function(t,a,r){r*=.5;var n=a[0],e=a[1],o=a[2],i=a[3],l=Math.sin(r),s=Math.cos(r);return t[0]=n*s+e*l,t[1]=e*s-n*l,t[2]=o*s+i*l,t[3]=i*s-o*l,t},l.calculateW=function(t,a){var r=a[0],n=a[1],e=a[2];return t[0]=r,t[1]=n,t[2]=e,t[3]=Math.sqrt(Math.abs(1-r*r-n*n-e*e)),t},l.dot=i.dot,l.lerp=i.lerp,l.slerp=function(t,a,r,n){var e,o,i,l,s,u=a[0],h=a[1],c=a[2],M=a[3],f=r[0],m=r[1],x=r[2],d=r[3];return o=u*f+h*m+c*x+M*d,o<0&&(o=-o,f=-f,m=-m,x=-x,d=-d),1-o>1e-6?(e=Math.acos(o),i=Math.sin(e),l=Math.sin((1-n)*e)/i,s=Math.sin(n*e)/i):(l=1-n,s=n),t[0]=l*u+s*f,t[1]=l*h+s*m,t[2]=l*c+s*x,t[3]=l*M+s*d,t},l.sqlerp=function(){var t=l.create(),a=l.create();return function(r,n,e,o,i,s){return l.slerp(t,n,i,s),l.slerp(a,e,o,s),l.slerp(r,t,a,2*s*(1-s)),r}}(),l.invert=function(t,a){var r=a[0],n=a[1],e=a[2],o=a[3],i=r*r+n*n+e*e+o*o,l=i?1/i:0;return t[0]=-r*l,t[1]=-n*l,t[2]=-e*l,t[3]=o*l,t},l.conjugate=function(t,a){return t[0]=-a[0],t[1]=-a[1],t[2]=-a[2],t[3]=a[3],t},l.length=i.length,l.len=l.length,l.squaredLength=i.squaredLength,l.sqrLen=l.squaredLength,l.normalize=i.normalize,l.fromMat3=function(t,a){var r,n=a[0]+a[4]+a[8];if(n>0)r=Math.sqrt(n+1),t[3]=.5*r,r=.5/r,t[0]=(a[5]-a[7])*r,t[1]=(a[6]-a[2])*r,t[2]=(a[1]-a[3])*r;else{var e=0;a[4]>a[0]&&(e=1),a[8]>a[3*e+e]&&(e=2);var o=(e+1)%3,i=(e+2)%3;r=Math.sqrt(a[3*e+e]-a[3*o+o]-a[3*i+i]+1),t[e]=.5*r,r=.5/r,t[3]=(a[3*o+i]-a[3*i+o])*r,t[o]=(a[3*o+e]+a[3*e+o])*r,t[i]=(a[3*i+e]+a[3*e+i])*r}return t},l.str=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},l.exactEquals=i.exactEquals,l.equals=i.equals,t.exports=l},function(t,a,r){var n=r(0),e={};e.create=function(){var t=new n.ARRAY_TYPE(2);return t[0]=0,t[1]=0,t},e.clone=function(t){var a=new n.ARRAY_TYPE(2);return a[0]=t[0],a[1]=t[1],a},e.fromValues=function(t,a){var r=new n.ARRAY_TYPE(2);return r[0]=t,r[1]=a,r},e.copy=function(t,a){return t[0]=a[0],t[1]=a[1],t},e.set=function(t,a,r){return t[0]=a,t[1]=r,t},e.add=function(t,a,r){return t[0]=a[0]+r[0],t[1]=a[1]+r[1],t},e.subtract=function(t,a,r){return t[0]=a[0]-r[0],t[1]=a[1]-r[1],t},e.sub=e.subtract,e.multiply=function(t,a,r){return t[0]=a[0]*r[0],t[1]=a[1]*r[1],t},e.mul=e.multiply,e.divide=function(t,a,r){return t[0]=a[0]/r[0],t[1]=a[1]/r[1],t},e.div=e.divide,e.ceil=function(t,a){return t[0]=Math.ceil(a[0]),t[1]=Math.ceil(a[1]),t},e.floor=function(t,a){return t[0]=Math.floor(a[0]),t[1]=Math.floor(a[1]),t},e.min=function(t,a,r){return t[0]=Math.min(a[0],r[0]),t[1]=Math.min(a[1],r[1]),t},e.max=function(t,a,r){return t[0]=Math.max(a[0],r[0]),t[1]=Math.max(a[1],r[1]),t},e.round=function(t,a){return t[0]=Math.round(a[0]),t[1]=Math.round(a[1]),t},e.scale=function(t,a,r){return t[0]=a[0]*r,t[1]=a[1]*r,t},e.scaleAndAdd=function(t,a,r,n){return t[0]=a[0]+r[0]*n,t[1]=a[1]+r[1]*n,t},e.distance=function(t,a){var r=a[0]-t[0],n=a[1]-t[1];return Math.sqrt(r*r+n*n)},e.dist=e.distance,e.squaredDistance=function(t,a){var r=a[0]-t[0],n=a[1]-t[1];return r*r+n*n},e.sqrDist=e.squaredDistance,e.length=function(t){var a=t[0],r=t[1];return Math.sqrt(a*a+r*r)},e.len=e.length,e.squaredLength=function(t){var a=t[0],r=t[1];return a*a+r*r},e.sqrLen=e.squaredLength,e.negate=function(t,a){return t[0]=-a[0],t[1]=-a[1],t},e.inverse=function(t,a){return t[0]=1/a[0],t[1]=1/a[1],t},e.normalize=function(t,a){var r=a[0],n=a[1],e=r*r+n*n;return e>0&&(e=1/Math.sqrt(e),t[0]=a[0]*e,t[1]=a[1]*e),t},e.dot=function(t,a){return t[0]*a[0]+t[1]*a[1]},e.cross=function(t,a,r){var n=a[0]*r[1]-a[1]*r[0];return t[0]=t[1]=0,t[2]=n,t},e.lerp=function(t,a,r,n){var e=a[0],o=a[1];return t[0]=e+n*(r[0]-e),t[1]=o+n*(r[1]-o),t},e.random=function(t,a){a=a||1;var r=2*n.RANDOM()*Math.PI;return t[0]=Math.cos(r)*a,t[1]=Math.sin(r)*a,t},e.transformMat2=function(t,a,r){var n=a[0],e=a[1];return t[0]=r[0]*n+r[2]*e,t[1]=r[1]*n+r[3]*e,t},e.transformMat2d=function(t,a,r){var n=a[0],e=a[1];return t[0]=r[0]*n+r[2]*e+r[4],t[1]=r[1]*n+r[3]*e+r[5],t},e.transformMat3=function(t,a,r){var n=a[0],e=a[1];return t[0]=r[0]*n+r[3]*e+r[6],t[1]=r[1]*n+r[4]*e+r[7],t},e.transformMat4=function(t,a,r){var n=a[0],e=a[1];return t[0]=r[0]*n+r[4]*e+r[12],t[1]=r[1]*n+r[5]*e+r[13],t},e.forEach=function(){var t=e.create();return function(a,r,n,e,o,i){var l,s;for(r||(r=2),n||(n=0),s=e?Math.min(e*r+n,a.length):a.length,l=n;l<s;l+=r)t[0]=a[l],t[1]=a[l+1],o(t,t,i),a[l]=t[0],a[l+1]=t[1];return a}}(),e.str=function(t){return"vec2("+t[0]+", "+t[1]+")"},e.exactEquals=function(t,a){return t[0]===a[0]&&t[1]===a[1]},e.equals=function(t,a){var r=t[0],e=t[1],o=a[0],i=a[1];return Math.abs(r-o)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(e-i)<=n.EPSILON*Math.max(1,Math.abs(e),Math.abs(i))},t.exports=e},function(t,a,r){function n(t){return r(e(t))}function e(t){var a=o[t];if(!(a+1))throw new Error("Cannot find module '"+t+"'.");return a}var o={"./bg.fsh.glsl":16,"./bg.vsh.glsl":17,"./fb.fsh.glsl":18,"./fb.vsh.glsl":19,"./gem.fsh.glsl":20,"./gem.vsh.glsl":21};n.keys=function(){return Object.keys(o)},n.resolve=e,t.exports=n,n.id=15},function(t,a){t.exports="#version 300 es\nprecision highp float;\n\nin vec2 pos;\n\nuniform float vinRadi;\n\nuniform float rippleSize;\nuniform float rippleMaxStrength;\n\nuniform vec3 baseColour;\nuniform vec3 rippleColour;\n\n\nstruct ripple{\n\tfloat age;\n\tfloat strength;\n\tvec2 pos;\n};\n\nuniform struct{\n\tripple ripples[128];\n\tint num;\n}rip;\n\nout vec4 result;\n\nvoid main(void) {\n\tvec3 colour = baseColour;\n\n\tfloat sizeMod = rippleSize / rippleMaxStrength;\n\tfor (int i = 0; i < rip.num; i++){\n\t\tripple r = rip.ripples[i];\n\t\tfloat size = r.age * sizeMod-0.03;\n\t\tfloat strength = ((r.strength - r.age) / rippleMaxStrength);\n\t\tfloat dropoff = max(-(abs(size - distance(r.pos,pos))/0.03)+1.0,0.0);\n\t\tif (dropoff > 0.0)\n\t\t\tcolour += rippleColour * pow(strength, 2.0) * dropoff;\n\t}\n\n\n\tfloat value = -(length(pos) / vinRadi) + 1.0;\n\tresult = vec4(colour * value, 1.0);\n}\n"},function(t,a){t.exports="#version 300 es\nprecision highp float;\n\nlayout(location = 0) in vec2 position;\n\nuniform float aspect;\nuniform float desiredAspect;\n\nout vec2 pos;\n\nvoid main(void){\n\tvec2 size = vec2(1.0,1.0);\n\n\tif (desiredAspect < 1.0){\n\t\tsize.x = size.y * desiredAspect;\n\t} else {\n\t\tsize.y = size.x / desiredAspect;\n\t}\n\n\tif(aspect > desiredAspect) {\n\t\tsize.x = size.y * aspect;\n\t} else {\n\t\tsize.y = size.x / aspect;\n\t}\n\tpos = vec2(size.x*position.x,size.y*position.y);\n\tgl_Position = vec4(position.xy,0.9,1.0);\n}\n"},function(t,a){t.exports="#version 300 es\nprecision highp float;\n\nin vec2 pos;\nin vec2 coord;\n\nuniform sampler2D tex;\n\nuniform float squaresTime;\nuniform float spiralTime;\n\nout vec4 result;\n\nfloat spiralAngle(float radi){\n\treturn 1.0*log(radi*1.0);\n}\n\nfloat angle(float angle1, float angle2) {\n\tfloat a = radians(10.0);\n\tfloat angleDiff = angle1 - angle2;\n\tangleDiff = mod(angleDiff+a,a*2.0)-a;\n\treturn angleDiff;\n}\n\nbool checkSpiral(float r, float a) {\n\tvec2 spiral = vec2(0.0);\n\tspiral.x = spiralAngle(r);\n\tspiral.y = spiralAngle(r+0.05);\n\treturn angle(spiral.x,a)>0.0 && angle(a,spiral.y)>0.0;\n\n}\n\nvec3 pattern(void){\n\tfloat value = 0.0;\n\n\tvec2 p = pos;\n\tp = p * 5.0 + sin(p.y + squaresTime) * 1.5;\n\tp.y = p.y + p.x;\n\tp = mod(p, 1.0);\n\tif(p.x < 0.1 || p.y < 0.1)\n\t\tvalue += 0.5;\n\n\tp = pos + vec2(sin(spiralTime),cos(spiralTime));\n\tfloat pi = radians(180.0);\n\tfloat r = length(p);\n\tfloat a = atan(p.y,p.x)-spiralTime; // to polar\n\tif(checkSpiral(r,a)||checkSpiral(r,-a))\n\t\tvalue += 0.5;\n\n\t//return -vec3(value, value, value)+1.0;\n\treturn vec3(value, value, value);\n}\n\nvoid main(void) {\n\tresult = texture(tex, coord);\n\tif (result.a<1.0)\n\t\tresult = mix(result.rgba,vec4(pattern(),1.0), 1.0 - result.a);\n\t//result = vec4(pattern(),1.0);\n}\n"},function(t,a){t.exports="#version 300 es\nprecision highp float;\n\nlayout(location = 0) in vec2 position;\n\nuniform float aspect;\nuniform float desiredAspect;\n\nuniform vec2 sizeMod;\n\nout vec2 coord;\nout vec2 pos;\n\nvoid main(void){\n\tvec2 size = vec2(1.0,1.0);\n\n\tif (desiredAspect < 1.0){\n\t\tsize.x = size.y * desiredAspect;\n\t} else {\n\t\tsize.y = size.x / desiredAspect;\n\t}\n\n\tif(aspect > desiredAspect) {\n\t\tsize.x = size.y * aspect;\n\t} else {\n\t\tsize.y = size.x / aspect;\n\t}\n\tpos = vec2(size.x*position.x,size.y*position.y);\n\n\tcoord = position;\n\tcoord.x = coord.x * sizeMod.x;\n\tcoord.y = coord.y * sizeMod.y;\n\tcoord = coord * 0.5 + 0.5;\n\tgl_Position = vec4(position,0.9,1.0);\n}\n"},function(t,a){t.exports="#version 300 es\nprecision highp float;\n\nin vec3 norm;\nin vec3 pos;\n\nuniform mat4 model;\nuniform mat4 view;\nuniform mat4 proj;\n\nuniform vec4 objectColour;\nuniform vec3 lightColour;\nuniform vec3 lightDir;\nuniform float ambientStrength;\nuniform float specStrength;\n\nout vec4 result;\n\nvoid main(void) {\n\tvec3 ambient = ambientStrength * lightColour * objectColour.rgb;\n\n\t//diffuse is calculated in world space.\n\tfloat diff = max(dot(normalize(norm), normalize(-lightDir)), 0.0);\n\tvec3 diffuse = diff * lightColour * objectColour.rgb;\n\n\t//specular is calculated in view space.\n\tvec3 reflectDir = reflect(normalize(mat3(transpose(inverse(view))) * lightDir), normalize(mat3(transpose(inverse(view))) * norm));\n\tfloat spec = pow(max(dot(vec3(0,0,1), reflectDir), 0.0), pow(2.0,6.0));\n\tvec3 specular = specStrength * spec * lightColour;\n\n\tvec3 colour = ambient + diffuse + specular;\n\n\tresult = vec4(colour, objectColour.a);\n}\n"},function(t,a){t.exports="#version 300 es\n\nlayout(location = 0) in vec3 position;\nlayout(location = 1) in vec3 normal;\n\nuniform mat4 model;\nuniform mat4 view;\nuniform mat4 proj;\n\nout vec3 norm;\nout vec3 pos;\n\nvoid main(void) {\n\tpos = vec3(model * vec4(position, 1.0));\n\tnorm = mat3(transpose(inverse(model))) * normal;\n\tgl_Position = proj * view * model * vec4(position, 1.0);\n}\n"},function(t,a,r){"use strict";function n(t,a){let r=e.mat4.lookAt(e.mat4.create(),o.a.transform.view.eye,o.a.transform.view.centre,o.a.transform.view.up);t.uniformMatrix("view",r);let n=i.b(a,o.a.transform.proj.width,o.a.transform.proj.height,o.a.transform.proj.depth);t.uniformMatrix("proj",n)}a.a=n;var e=r(2),o=(r.n(e),r(1)),i=r(7)},function(t,a,r){"use strict";var n=r(3),e=r(1),o=r(7);class i{constructor(t){this.gl=t,this.ripples=[],this.shaderProgram=new n.a(t,"bg.vsh","bg.fsh"),this.VAO=t.createVertexArray();let a=t.createBuffer();t.bindVertexArray(this.VAO),t.bindBuffer(t.ARRAY_BUFFER,a),t.bufferData(t.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,1,1,-1,1]),t.STATIC_DRAW),t.vertexAttribPointer(0,2,t.FLOAT,!1,8,0),t.enableVertexAttribArray(0),t.bindBuffer(t.ARRAY_BUFFER,null),t.bindVertexArray(null)}render(t,a){if(this.shaderProgram.use(),Math.random()<e.a.bg.ripple.chance){let t={};t.age=a,t.strength=o.a(e.a.bg.ripple.strength.min,e.a.bg.ripple.strength.max),t.x=o.a(-2,2),t.y=o.a(-2,2),this.ripples.push(t)}for(let t=this.ripples.length-1;t>-1;t--)a-this.ripples[t].age>this.ripples[t].strength&&this.ripples.splice(t,1);this.shaderProgram.uniformi(1,"rip.num",this.ripples.length);for(let t=0;t<this.ripples.length;t++)this.shaderProgram.uniform(1,"rip.ripples["+t+"].age",a-this.ripples[t].age),this.shaderProgram.uniform(1,"rip.ripples["+t+"].strength",this.ripples[t].strength),this.shaderProgram.uniform(2,"rip.ripples["+t+"].pos",this.ripples[t].x,this.ripples[t].y);this.shaderProgram.uniform(1,"aspect",t),this.shaderProgram.uniform(1,"desiredAspect",e.a.transform.proj.width/e.a.transform.proj.height),this.shaderProgram.uniform(1,"vinRadi",e.a.bg.vinRadi),this.shaderProgram.uniform(3,"baseColour",e.a.bg.baseColour),this.shaderProgram.uniform(3,"rippleColour",e.a.bg.ripple.colour),this.shaderProgram.uniform(1,"rippleSize",e.a.bg.ripple.size),this.shaderProgram.uniform(1,"rippleMaxStrength",e.a.bg.ripple.strength.max),this.gl.bindVertexArray(this.VAO),this.gl.drawArrays(this.gl.TRIANGLE_FAN,0,4)}}a.a=i},function(t,a){!function(t){"use strict";function a(a,r){var n=t.createEvent("Event");n.initEvent(a,!0,!1),r.dispatchEvent(n)}function r(r){r.stopPropagation(),r.stopImmediatePropagation(),t[s.enabled]=t[o.enabled],t[s.element]=t[o.element],a(s.events.change,r.target)}function n(t){a(s.events.error,t.target)}function e(a){return function(r,n){function e(){r(),t.removeEventListener(o.events.change,e,!1)}function i(){n(new TypeError),t.removeEventListener(o.events.error,i,!1)}return a!==s.exit||t[o.element]?(t.addEventListener(o.events.change,e,!1),void t.addEventListener(o.events.error,i,!1)):void setTimeout(function(){n(new TypeError)},1)}}var o,i,l={w3:{enabled:"fullscreenEnabled",element:"fullscreenElement",request:"requestFullscreen",exit:"exitFullscreen",events:{change:"fullscreenchange",error:"fullscreenerror"}},webkit:{enabled:"webkitFullscreenEnabled",element:"webkitCurrentFullScreenElement",request:"webkitRequestFullscreen",exit:"webkitExitFullscreen",events:{change:"webkitfullscreenchange",error:"webkitfullscreenerror"}},moz:{enabled:"mozFullScreenEnabled",element:"mozFullScreenElement",request:"mozRequestFullScreen",exit:"mozCancelFullScreen",events:{change:"mozfullscreenchange",error:"mozfullscreenerror"}},ms:{enabled:"msFullscreenEnabled",element:"msFullscreenElement",request:"msRequestFullscreen",exit:"msExitFullscreen",events:{change:"MSFullscreenChange",error:"MSFullscreenError"}}},s=l.w3;for(i in l)if(l[i].enabled in t){o=l[i];break}s.enabled in t||!o||(t.addEventListener(o.events.change,r,!1),t.addEventListener(o.events.error,n,!1),t[s.enabled]=t[o.enabled],t[s.element]=t[o.element],t[s.exit]=function(){var a=t[o.exit]();return!a&&Promise?new Promise(e(s.exit)):a},Element.prototype[s.request]=function(){var t=this[o.request].apply(this,arguments);return!t&&Promise?new Promise(e(s.request)):t})}(document)},function(t,a,r){"use strict";function n(t){let a=e.a.fb.size.width,r=e.a.fb.size.height,n=e.a.transform.proj.width/e.a.transform.proj.height;n>1?a=r*n:r=a/n,t>n?a=r*t:r=a/t;let o={width:2*Math.ceil(a/2),height:2*Math.ceil(r/2),offWidth:0,offHeight:0};return o.offWidth=(o.width-a)/o.width,o.offHeight=(o.height-r)/o.height,o}var e=r(1),o=r(3);class i{constructor(t){this.gl=t,this.shaderProgram=new o.a(t,"fb.vsh","fb.fsh"),this.VAO=t.createVertexArray();let a=t.createBuffer();t.bindVertexArray(this.VAO),t.bindBuffer(t.ARRAY_BUFFER,a),t.bufferData(t.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,1,1,-1,1]),t.STATIC_DRAW),t.vertexAttribPointer(0,2,t.FLOAT,!1,8,0),t.enableVertexAttribArray(0),t.bindBuffer(t.ARRAY_BUFFER,null),t.bindVertexArray(null)}render(t,a){this.shaderProgram.use(),this.shaderProgram.uniform(1,"squaresTime",a/e.a.fb.squaresSpeed),this.shaderProgram.uniform(1,"spiralTime",a/e.a.fb.spiralSpeed),this.shaderProgram.uniform(1,"aspect",t),this.shaderProgram.uniform(1,"desiredAspect",e.a.transform.proj.width/e.a.transform.proj.height),this.shaderProgram.uniform(2,"sizeMod",[1-this.size.offWidth,1-this.size.offHeight]),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,this.texture),this.gl.bindVertexArray(this.VAO),this.gl.drawArrays(this.gl.TRIANGLE_FAN,0,4)}bind(){this.gl.viewport(0,0,this.size.width,this.size.height),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this.ID)}unbind(){this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null)}aspect(){return this.size.width/this.size.height}generate(t){if(this.ID=this.gl.createFramebuffer(),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this.ID),this.size=n(t),this.texture=this.gl.createTexture(),this.gl.bindTexture(this.gl.TEXTURE_2D,this.texture),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.size.width,this.size.height,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,null),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.NEAREST),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.NEAREST),this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER,this.gl.COLOR_ATTACHMENT0,this.gl.TEXTURE_2D,this.texture,0),this.depth=this.gl.createRenderbuffer(),this.gl.bindRenderbuffer(this.gl.RENDERBUFFER,this.depth),this.gl.renderbufferStorage(this.gl.RENDERBUFFER,this.gl.DEPTH_COMPONENT16,this.size.width,this.size.height),this.gl.framebufferRenderbuffer(this.gl.FRAMEBUFFER,this.gl.DEPTH_ATTACHMENT,this.gl.RENDERBUFFER,this.depth),this.gl.checkFramebufferStatus(this.gl.FRAMEBUFFER)!=this.gl.FRAMEBUFFER_COMPLETE)throw"Framebuffer failed";this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null)}}a.a=i}]);